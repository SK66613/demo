"use strict";(self.webpackChunkvisme_web=self.webpackChunkvisme_web||[]).push([[1305,8370,2721],{221618:(J,F,E)=>{E.r(F),E.d(F,{default:()=>r});const w={name:"HorizontalBlurShader",uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float h;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

			gl_FragColor = sum;

		}`},C={name:"VerticalBlurShader",uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`

		varying vec2 vUv;

		void main() {

			vUv = uv;
			gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

		}`,fragmentShader:`

		uniform sampler2D tDiffuse;
		uniform float v;

		varying vec2 vUv;

		void main() {

			vec4 sum = vec4( 0.0 );

			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
			sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

			gl_FragColor = sum;

		}`};var A=E(181455),i=E(422870),n=E(51950),_=E(295641),x=E(457803),h=E(824954),m=E(136767),a=E(955609),s=E(641897);const t={shadow:{blur:3.5,darkness:1,opacity:.1},plane:{color:"#ffffff",opacity:0},showWireframe:!1},r=l=>{let{planeWidth:y=4,planeHeight:b=4,cameraHeight:c=2,scene:v,renderer:M,layer:p,boundingBoxObject:f}=l,g=null,d=null,u=null,o=null,S=null,T=null,B=null;function z(Y){if(!g||!d||!u||!o||!S||!T)return;const D=Math.max(y,b)/4,P=Y/D;g.visible=!0,g.material=d,g.material.uniforms.tDiffuse.value=o.texture,d.uniforms.h.value=Number(P)/256,M.setRenderTarget(S),M.render(g,T),g.material=u,g.material.uniforms.tDiffuse.value=S.texture,u.uniforms.v.value=Number(P)/256,M.setRenderTarget(o),M.render(g,T),g.visible=!1}const R=new m.Group;if(R.name="shadowGroup",R.position.y=0,f){const Y=new h.Vector3;f.getCenter(Y),R.position.copy(Y).setY(0);const Z=Math.max(f.getSize(new h.Vector3).x,f.getSize(new h.Vector3).z)*Math.sqrt(2);y=Z,b=Z}v.add(R),o=new s.n(512,512),o.texture.generateMipmaps=!1,S=new s.n(512,512),S.texture.generateMipmaps=!1;const O=new i.b(y,b).rotateX(Math.PI/2),U=new n.V({map:o.texture,opacity:t.shadow.opacity,transparent:!0,depthWrite:!1,depthTest:!0}),L=new a.e(O,U);L.renderOrder=1,L.layers.set(p),R.add(L),L.scale.y=-1,g=new a.e(O),g.visible=!1,g.layers.set(p),R.add(g);const H=new n.V({color:t.plane.color,opacity:t.plane.opacity,transparent:!0,depthWrite:!1,depthTest:!1}),Q=new a.e(O,H);return Q.rotateX(Math.PI),g.layers.set(p),R.add(Q),T=new A.q(-y/2,y/2,b/2,-b/2,0,c),T.rotation.x=Math.PI/2,T.layers.disableAll(),T.layers.enable(p),R.add(T),B=new _.C,B.userData.darkness={value:t.shadow.darkness},B.onBeforeCompile=function(Y){Y.uniforms.darkness=B.userData.darkness,Y.fragmentShader=`
        uniform float darkness;
        ${Y.fragmentShader.replace("gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );","gl_FragColor = vec4( vec3( 0.0 ), ( 1.0 - fragCoordZ ) * darkness );")}
      `},B.depthTest=!1,B.depthWrite=!1,d=new x.B(w),d.depthTest=!1,u=new x.B(C),u.depthTest=!1,{renderShadows:(Y,Z)=>{if(!B||!o||!T)return;Z!==void 0&&(L.material.opacity=Z),v.overrideMaterial=B;const D=M.getClearAlpha();M.setClearAlpha(0),M.setRenderTarget(o),M.render(v,T),v.overrideMaterial=null,z(Y??t.shadow.blur),z((Y??t.shadow.blur)*.4),M.setRenderTarget(null),M.setClearAlpha(D),v.background=null}}}},442789:(J,F,E)=>{E.d(F,{i:()=>i});var w=E(272790),C=E(541761),A=E(493303);class i extends A.B{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new C.k,this.projectionMatrix=new C.k,this.projectionMatrixInverse=new C.k,this.coordinateSystem=w.TdN,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(_,x){return super.copy(_,x),this.matrixWorldInverse.copy(_.matrixWorldInverse),this.projectionMatrix.copy(_.projectionMatrix),this.projectionMatrixInverse.copy(_.projectionMatrixInverse),this.coordinateSystem=_.coordinateSystem,this}getWorldDirection(_){return super.getWorldDirection(_).negate()}updateMatrixWorld(_){super.updateMatrixWorld(_),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(_,x){super.updateWorldMatrix(_,x),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}},181455:(J,F,E)=>{E.d(F,{q:()=>C});var w=E(442789);class C extends w.i{constructor(i=-1,n=1,_=1,x=-1,h=.1,m=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=i,this.right=n,this.top=_,this.bottom=x,this.near=h,this.far=m,this.updateProjectionMatrix()}copy(i,n){return super.copy(i,n),this.left=i.left,this.right=i.right,this.top=i.top,this.bottom=i.bottom,this.near=i.near,this.far=i.far,this.zoom=i.zoom,this.view=i.view===null?null:Object.assign({},i.view),this}setViewOffset(i,n,_,x,h,m){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=i,this.view.fullHeight=n,this.view.offsetX=_,this.view.offsetY=x,this.view.width=h,this.view.height=m,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const i=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),_=(this.right+this.left)/2,x=(this.top+this.bottom)/2;let h=_-i,m=_+i,a=x+n,s=x-n;if(this.view!==null&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=t*this.view.offsetX,m=h+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(h,m,a,s,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(i){const n=super.toJSON(i);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}},272790:(J,F,E)=>{E.d(F,{$EB:()=>r,$Yl:()=>Y,$_I:()=>St,$ei:()=>u,BXX:()=>Kt,B_h:()=>ne,CVz:()=>ee,CWW:()=>Se,Cfg:()=>bt,DAe:()=>Ie,Dmk:()=>Vt,EQC:()=>Re,EZo:()=>b,EdD:()=>v,FFZ:()=>ti,FV:()=>nt,FXf:()=>f,Fn:()=>xe,G3T:()=>Ae,GJx:()=>yt,GWd:()=>kt,Gwm:()=>N,H23:()=>Me,HIg:()=>Ft,HO_:()=>we,HXV:()=>$t,IE4:()=>Yt,Jnc:()=>_,K52:()=>W,KDk:()=>se,KLL:()=>Ge,KRh:()=>q,Ke9:()=>Pe,Kef:()=>be,Kwu:()=>c,LAk:()=>ot,LiQ:()=>B,Mjd:()=>rt,N5j:()=>Ue,NTi:()=>y,Nt7:()=>U,Nz6:()=>Zt,OUM:()=>At,Om:()=>ft,OuU:()=>R,PJ3:()=>Ce,QP0:()=>m,Qrf:()=>he,RQf:()=>Ot,Riy:()=>ie,Rkk:()=>Ve,RrE:()=>it,RyA:()=>s,S$4:()=>ge,TdN:()=>si,TiK:()=>Ke,TkQ:()=>Xt,U3G:()=>j,UTZ:()=>ht,V3x:()=>It,VT0:()=>Nt,VVr:()=>Xe,Vb5:()=>n,VxR:()=>je,W9U:()=>_e,WNZ:()=>i,Wdf:()=>ii,Wew:()=>zt,Wk7:()=>a,XG_:()=>ve,XIg:()=>l,XrR:()=>st,Yuy:()=>Ct,ZQM:()=>jt,Zr2:()=>Ne,_QJ:()=>ue,a5J:()=>ce,aEY:()=>H,aJ8:()=>et,aMy:()=>Te,agE:()=>ei,amv:()=>Ye,bC7:()=>me,bCz:()=>M,bI3:()=>Fe,bkx:()=>Rt,brA:()=>V,bw0:()=>X,c90:()=>Ht,cHt:()=>Bt,caT:()=>G,czI:()=>ae,dcC:()=>Wt,dhZ:()=>ze,e0p:()=>Z,eHc:()=>P,eoi:()=>qe,er$:()=>We,f4X:()=>T,fBL:()=>Et,g7M:()=>at,gJ2:()=>Pt,gO9:()=>p,gWB:()=>$e,ghU:()=>gt,h2z:()=>De,hB5:()=>t,hdd:()=>O,hgQ:()=>Q,hsX:()=>e,hxR:()=>Mt,hy7:()=>lt,i7u:()=>ri,ie2:()=>z,ix0:()=>Dt,jR7:()=>Jt,jf0:()=>Le,jzd:()=>Qe,k6Q:()=>qt,k6q:()=>vt,kO0:()=>Je,kRr:()=>wt,kTW:()=>xt,kTp:()=>Qt,kyO:()=>$,lGu:()=>k,lc7:()=>Ee,ljd:()=>Be,lyL:()=>pe,nNL:()=>K,nST:()=>g,ojh:()=>o,ojs:()=>ye,ov9:()=>D,pBf:()=>te,pHI:()=>_t,paN:()=>Gt,psI:()=>le,qa3:()=>re,qad:()=>S,rQf:()=>Oe,rSH:()=>oe,sKt:()=>He,sPf:()=>w,tJf:()=>Tt,uB5:()=>de,uV5:()=>mt,vim:()=>Ze,vyJ:()=>ke,wfO:()=>pt,wn6:()=>L,wrO:()=>Ut,xFO:()=>dt,xSv:()=>I,y3Z:()=>fe,y_p:()=>tt,zdS:()=>Lt,znC:()=>d});const w="179",C={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},A={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},i=0,n=1,_=2,x=3,h=0,m=1,a=2,s=3,t=0,e=1,r=2,l=0,y=1,b=2,c=3,v=4,M=5,p=100,f=101,g=102,d=103,u=104,o=200,S=201,T=202,B=203,z=204,R=205,O=206,U=207,L=208,H=209,Q=210,it=211,Y=212,Z=213,D=214,P=0,k=1,V=2,I=3,j=4,N=5,W=6,X=7,G=0,q=1,st=2,tt=0,$=1,rt=2,K=3,nt=4,at=5,ot=6,et=7,ct="attached",ut="detached",ht=300,lt=301,dt=302,pt=303,mt=304,ft=306,yt=1e3,gt=1001,xt=1002,Mt=1003,_t=1004,ni=1004,bt=1005,ai=1005,vt=1006,wt=1007,oi=1007,St=1008,hi=1008,At=1009,Tt=1010,Et=1011,Bt=1012,Ct=1013,Rt=1014,Ot=1015,Dt=1016,zt=1017,Pt=1018,It=1020,Vt=35902,Ut=1021,Ft=1022,kt=1023,Lt=1026,Wt=1027,Nt=1028,jt=1029,Gt=1030,Xt=1031,li=1032,Ht=1033,Yt=33776,Zt=33777,Jt=33778,Kt=33779,qt=35840,Qt=35841,$t=35842,te=35843,ee=36196,ie=37492,se=37496,re=37808,ne=37809,ae=37810,oe=37811,he=37812,le=37813,ce=37814,ue=37815,de=37816,pe=37817,me=37818,fe=37819,ye=37820,ge=37821,xe=36492,Me=36494,_e=36495,be=36283,ve=36284,we=36285,Se=36286,Ae=2200,Te=2201,Ee=2202,Be=2300,Ce=2301,Re=2302,Oe=2400,De=2401,ze=2402,Pe=2500,Ie=2501,ci=0,ui=1,di=2,Ve=3200,Ue=3201,pi=3202,mi=3203,Fe=0,ke=1,Le="",We="srgb",Ne="srgb-linear",je="linear",Ge="srgb",fi=0,Xe=7680,yi=7681,gi=7682,xi=7683,Mi=34055,_i=34056,bi=5386,vi=512,wi=513,Si=514,Ai=515,Ti=516,Ei=517,Bi=518,He=519,Ye=512,Ze=513,Je=514,Ke=515,qe=516,Qe=517,$e=518,ti=519,ei=35044,Ci=35048,Ri=35040,Oi=35045,Di=35049,zi=35041,Pi=35046,Ii=35050,Vi=35042,Ui="100",ii="300 es",si=2e3,ri=2001,Fi={COMPUTE:"compute",RENDER:"render"},ki={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},Li={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"}},739920:(J,F,E)=>{E.d(F,{TH:()=>e,qt:()=>f,A$:()=>c,MW:()=>M});var w=E(824954),C=E(237481),A=E(774153),i=E(272790);const n=_();function _(){const g=new ArrayBuffer(4),d=new Float32Array(g),u=new Uint32Array(g),o=new Uint32Array(512),S=new Uint32Array(512);for(let R=0;R<256;++R){const O=R-127;O<-27?(o[R]=0,o[R|256]=32768,S[R]=24,S[R|256]=24):O<-14?(o[R]=1024>>-O-14,o[R|256]=1024>>-O-14|32768,S[R]=-O-1,S[R|256]=-O-1):O<=15?(o[R]=O+15<<10,o[R|256]=O+15<<10|32768,S[R]=13,S[R|256]=13):O<128?(o[R]=31744,o[R|256]=64512,S[R]=24,S[R|256]=24):(o[R]=31744,o[R|256]=64512,S[R]=13,S[R|256]=13)}const T=new Uint32Array(2048),B=new Uint32Array(64),z=new Uint32Array(64);for(let R=1;R<1024;++R){let O=R<<13,U=0;for(;!(O&8388608);)O<<=1,U-=8388608;O&=-8388609,U+=947912704,T[R]=O|U}for(let R=1024;R<2048;++R)T[R]=939524096+(R-1024<<13);for(let R=1;R<31;++R)B[R]=R<<23;B[31]=1199570944,B[32]=2147483648;for(let R=33;R<63;++R)B[R]=2147483648+(R-32<<23);B[63]=3347054592;for(let R=1;R<64;++R)R!==32&&(z[R]=1024);return{floatView:d,uint32View:u,baseTable:o,shiftTable:S,mantissaTable:T,exponentTable:B,offsetTable:z}}function x(g){Math.abs(g)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),g=(0,A.qE)(g,-65504,65504),n.floatView[0]=g;const d=n.uint32View[0],u=d>>23&511;return n.baseTable[u]+((d&8388607)>>n.shiftTable[u])}function h(g){const d=g>>10;return n.uint32View[0]=n.mantissaTable[n.offsetTable[d]+(g&1023)]+n.exponentTable[d],n.floatView[0]}class m{static toHalfFloat(d){return x(d)}static fromHalfFloat(d){return h(d)}}const a=new w.Vector3,s=new C.I;let t=0;class e{constructor(d,u,o=!1){if(Array.isArray(d))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:t++}),this.name="",this.array=d,this.itemSize=u,this.count=d!==void 0?d.length/u:0,this.normalized=o,this.usage=i.agE,this.updateRanges=[],this.gpuType=i.RQf,this.version=0}onUploadCallback(){}set needsUpdate(d){d===!0&&this.version++}setUsage(d){return this.usage=d,this}addUpdateRange(d,u){this.updateRanges.push({start:d,count:u})}clearUpdateRanges(){this.updateRanges.length=0}copy(d){return this.name=d.name,this.array=new d.array.constructor(d.array),this.itemSize=d.itemSize,this.count=d.count,this.normalized=d.normalized,this.usage=d.usage,this.gpuType=d.gpuType,this}copyAt(d,u,o){d*=this.itemSize,o*=u.itemSize;for(let S=0,T=this.itemSize;S<T;S++)this.array[d+S]=u.array[o+S];return this}copyArray(d){return this.array.set(d),this}applyMatrix3(d){if(this.itemSize===2)for(let u=0,o=this.count;u<o;u++)s.fromBufferAttribute(this,u),s.applyMatrix3(d),this.setXY(u,s.x,s.y);else if(this.itemSize===3)for(let u=0,o=this.count;u<o;u++)a.fromBufferAttribute(this,u),a.applyMatrix3(d),this.setXYZ(u,a.x,a.y,a.z);return this}applyMatrix4(d){for(let u=0,o=this.count;u<o;u++)a.fromBufferAttribute(this,u),a.applyMatrix4(d),this.setXYZ(u,a.x,a.y,a.z);return this}applyNormalMatrix(d){for(let u=0,o=this.count;u<o;u++)a.fromBufferAttribute(this,u),a.applyNormalMatrix(d),this.setXYZ(u,a.x,a.y,a.z);return this}transformDirection(d){for(let u=0,o=this.count;u<o;u++)a.fromBufferAttribute(this,u),a.transformDirection(d),this.setXYZ(u,a.x,a.y,a.z);return this}set(d,u=0){return this.array.set(d,u),this}getComponent(d,u){let o=this.array[d*this.itemSize+u];return this.normalized&&(o=(0,A.NU)(o,this.array)),o}setComponent(d,u,o){return this.normalized&&(o=(0,A.S8)(o,this.array)),this.array[d*this.itemSize+u]=o,this}getX(d){let u=this.array[d*this.itemSize];return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setX(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize]=u,this}getY(d){let u=this.array[d*this.itemSize+1];return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setY(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize+1]=u,this}getZ(d){let u=this.array[d*this.itemSize+2];return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setZ(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize+2]=u,this}getW(d){let u=this.array[d*this.itemSize+3];return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setW(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize+3]=u,this}setXY(d,u,o){return d*=this.itemSize,this.normalized&&(u=(0,A.S8)(u,this.array),o=(0,A.S8)(o,this.array)),this.array[d+0]=u,this.array[d+1]=o,this}setXYZ(d,u,o,S){return d*=this.itemSize,this.normalized&&(u=(0,A.S8)(u,this.array),o=(0,A.S8)(o,this.array),S=(0,A.S8)(S,this.array)),this.array[d+0]=u,this.array[d+1]=o,this.array[d+2]=S,this}setXYZW(d,u,o,S,T){return d*=this.itemSize,this.normalized&&(u=(0,A.S8)(u,this.array),o=(0,A.S8)(o,this.array),S=(0,A.S8)(S,this.array),T=(0,A.S8)(T,this.array)),this.array[d+0]=u,this.array[d+1]=o,this.array[d+2]=S,this.array[d+3]=T,this}onUpload(d){return this.onUploadCallback=d,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const d={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(d.name=this.name),this.usage!==i.agE&&(d.usage=this.usage),d}}class r extends e{constructor(d,u,o){super(new Int8Array(d),u,o)}}class l extends e{constructor(d,u,o){super(new Uint8Array(d),u,o)}}class y extends e{constructor(d,u,o){super(new Uint8ClampedArray(d),u,o)}}class b extends e{constructor(d,u,o){super(new Int16Array(d),u,o)}}class c extends e{constructor(d,u,o){super(new Uint16Array(d),u,o)}}class v extends e{constructor(d,u,o){super(new Int32Array(d),u,o)}}class M extends e{constructor(d,u,o){super(new Uint32Array(d),u,o)}}class p extends e{constructor(d,u,o){super(new Uint16Array(d),u,o),this.isFloat16BufferAttribute=!0}getX(d){let u=h(this.array[d*this.itemSize]);return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setX(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize]=x(u),this}getY(d){let u=h(this.array[d*this.itemSize+1]);return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setY(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize+1]=x(u),this}getZ(d){let u=h(this.array[d*this.itemSize+2]);return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setZ(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize+2]=x(u),this}getW(d){let u=h(this.array[d*this.itemSize+3]);return this.normalized&&(u=(0,A.NU)(u,this.array)),u}setW(d,u){return this.normalized&&(u=(0,A.S8)(u,this.array)),this.array[d*this.itemSize+3]=x(u),this}setXY(d,u,o){return d*=this.itemSize,this.normalized&&(u=(0,A.S8)(u,this.array),o=(0,A.S8)(o,this.array)),this.array[d+0]=x(u),this.array[d+1]=x(o),this}setXYZ(d,u,o,S){return d*=this.itemSize,this.normalized&&(u=(0,A.S8)(u,this.array),o=(0,A.S8)(o,this.array),S=(0,A.S8)(S,this.array)),this.array[d+0]=x(u),this.array[d+1]=x(o),this.array[d+2]=x(S),this}setXYZW(d,u,o,S,T){return d*=this.itemSize,this.normalized&&(u=(0,A.S8)(u,this.array),o=(0,A.S8)(o,this.array),S=(0,A.S8)(S,this.array),T=(0,A.S8)(T,this.array)),this.array[d+0]=x(u),this.array[d+1]=x(o),this.array[d+2]=x(S),this.array[d+3]=x(T),this}}class f extends e{constructor(d,u,o){super(new Float32Array(d),u,o)}}},5257:(J,F,E)=>{E.d(F,{L:()=>v});var w=E(824954),C=E(237481),A=E(523006),i=E(251750),n=E(739920),_=E(721993),x=E(493303),h=E(541761),m=E(914164),a=E(774153),s=E(472686);let t=0;const e=new h.k,r=new x.B,l=new w.Vector3,y=new A.Box3,b=new A.Box3,c=new w.Vector3;class v extends i.Q{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:t++}),this.uuid=(0,a.lk)(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(p){return Array.isArray(p)?this.index=new((0,s.AQ)(p)?n.MW:n.A$)(p,1):this.index=p,this}setIndirect(p){return this.indirect=p,this}getIndirect(){return this.indirect}getAttribute(p){return this.attributes[p]}setAttribute(p,f){return this.attributes[p]=f,this}deleteAttribute(p){return delete this.attributes[p],this}hasAttribute(p){return this.attributes[p]!==void 0}addGroup(p,f,g=0){this.groups.push({start:p,count:f,materialIndex:g})}clearGroups(){this.groups=[]}setDrawRange(p,f){this.drawRange.start=p,this.drawRange.count=f}applyMatrix4(p){const f=this.attributes.position;f!==void 0&&(f.applyMatrix4(p),f.needsUpdate=!0);const g=this.attributes.normal;if(g!==void 0){const u=new m.d().getNormalMatrix(p);g.applyNormalMatrix(u),g.needsUpdate=!0}const d=this.attributes.tangent;return d!==void 0&&(d.transformDirection(p),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(p){return e.makeRotationFromQuaternion(p),this.applyMatrix4(e),this}rotateX(p){return e.makeRotationX(p),this.applyMatrix4(e),this}rotateY(p){return e.makeRotationY(p),this.applyMatrix4(e),this}rotateZ(p){return e.makeRotationZ(p),this.applyMatrix4(e),this}translate(p,f,g){return e.makeTranslation(p,f,g),this.applyMatrix4(e),this}scale(p,f,g){return e.makeScale(p,f,g),this.applyMatrix4(e),this}lookAt(p){return r.lookAt(p),r.updateMatrix(),this.applyMatrix4(r.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(l).negate(),this.translate(l.x,l.y,l.z),this}setFromPoints(p){const f=this.getAttribute("position");if(f===void 0){const g=[];for(let d=0,u=p.length;d<u;d++){const o=p[d];g.push(o.x,o.y,o.z||0)}this.setAttribute("position",new n.qt(g,3))}else{const g=Math.min(p.length,f.count);for(let d=0;d<g;d++){const u=p[d];f.setXYZ(d,u.x,u.y,u.z||0)}p.length>f.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),f.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new A.Box3);const p=this.attributes.position,f=this.morphAttributes.position;if(p&&p.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new w.Vector3(-1/0,-1/0,-1/0),new w.Vector3(1/0,1/0,1/0));return}if(p!==void 0){if(this.boundingBox.setFromBufferAttribute(p),f)for(let g=0,d=f.length;g<d;g++){const u=f[g];y.setFromBufferAttribute(u),this.morphTargetsRelative?(c.addVectors(this.boundingBox.min,y.min),this.boundingBox.expandByPoint(c),c.addVectors(this.boundingBox.max,y.max),this.boundingBox.expandByPoint(c)):(this.boundingBox.expandByPoint(y.min),this.boundingBox.expandByPoint(y.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _.i);const p=this.attributes.position,f=this.morphAttributes.position;if(p&&p.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new w.Vector3,1/0);return}if(p){const g=this.boundingSphere.center;if(y.setFromBufferAttribute(p),f)for(let u=0,o=f.length;u<o;u++){const S=f[u];b.setFromBufferAttribute(S),this.morphTargetsRelative?(c.addVectors(y.min,b.min),y.expandByPoint(c),c.addVectors(y.max,b.max),y.expandByPoint(c)):(y.expandByPoint(b.min),y.expandByPoint(b.max))}y.getCenter(g);let d=0;for(let u=0,o=p.count;u<o;u++)c.fromBufferAttribute(p,u),d=Math.max(d,g.distanceToSquared(c));if(f)for(let u=0,o=f.length;u<o;u++){const S=f[u],T=this.morphTargetsRelative;for(let B=0,z=S.count;B<z;B++)c.fromBufferAttribute(S,B),T&&(l.fromBufferAttribute(p,B),c.add(l)),d=Math.max(d,g.distanceToSquared(c))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const p=this.index,f=this.attributes;if(p===null||f.position===void 0||f.normal===void 0||f.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const g=f.position,d=f.normal,u=f.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new n.TH(new Float32Array(4*g.count),4));const o=this.getAttribute("tangent"),S=[],T=[];for(let I=0;I<g.count;I++)S[I]=new w.Vector3,T[I]=new w.Vector3;const B=new w.Vector3,z=new w.Vector3,R=new w.Vector3,O=new C.I,U=new C.I,L=new C.I,H=new w.Vector3,Q=new w.Vector3;function it(I,j,N){B.fromBufferAttribute(g,I),z.fromBufferAttribute(g,j),R.fromBufferAttribute(g,N),O.fromBufferAttribute(u,I),U.fromBufferAttribute(u,j),L.fromBufferAttribute(u,N),z.sub(B),R.sub(B),U.sub(O),L.sub(O);const W=1/(U.x*L.y-L.x*U.y);isFinite(W)&&(H.copy(z).multiplyScalar(L.y).addScaledVector(R,-U.y).multiplyScalar(W),Q.copy(R).multiplyScalar(U.x).addScaledVector(z,-L.x).multiplyScalar(W),S[I].add(H),S[j].add(H),S[N].add(H),T[I].add(Q),T[j].add(Q),T[N].add(Q))}let Y=this.groups;Y.length===0&&(Y=[{start:0,count:p.count}]);for(let I=0,j=Y.length;I<j;++I){const N=Y[I],W=N.start,X=N.count;for(let G=W,q=W+X;G<q;G+=3)it(p.getX(G+0),p.getX(G+1),p.getX(G+2))}const Z=new w.Vector3,D=new w.Vector3,P=new w.Vector3,k=new w.Vector3;function V(I){P.fromBufferAttribute(d,I),k.copy(P);const j=S[I];Z.copy(j),Z.sub(P.multiplyScalar(P.dot(j))).normalize(),D.crossVectors(k,j);const W=D.dot(T[I])<0?-1:1;o.setXYZW(I,Z.x,Z.y,Z.z,W)}for(let I=0,j=Y.length;I<j;++I){const N=Y[I],W=N.start,X=N.count;for(let G=W,q=W+X;G<q;G+=3)V(p.getX(G+0)),V(p.getX(G+1)),V(p.getX(G+2))}}computeVertexNormals(){const p=this.index,f=this.getAttribute("position");if(f!==void 0){let g=this.getAttribute("normal");if(g===void 0)g=new n.TH(new Float32Array(f.count*3),3),this.setAttribute("normal",g);else for(let O=0,U=g.count;O<U;O++)g.setXYZ(O,0,0,0);const d=new w.Vector3,u=new w.Vector3,o=new w.Vector3,S=new w.Vector3,T=new w.Vector3,B=new w.Vector3,z=new w.Vector3,R=new w.Vector3;if(p)for(let O=0,U=p.count;O<U;O+=3){const L=p.getX(O+0),H=p.getX(O+1),Q=p.getX(O+2);d.fromBufferAttribute(f,L),u.fromBufferAttribute(f,H),o.fromBufferAttribute(f,Q),z.subVectors(o,u),R.subVectors(d,u),z.cross(R),S.fromBufferAttribute(g,L),T.fromBufferAttribute(g,H),B.fromBufferAttribute(g,Q),S.add(z),T.add(z),B.add(z),g.setXYZ(L,S.x,S.y,S.z),g.setXYZ(H,T.x,T.y,T.z),g.setXYZ(Q,B.x,B.y,B.z)}else for(let O=0,U=f.count;O<U;O+=3)d.fromBufferAttribute(f,O+0),u.fromBufferAttribute(f,O+1),o.fromBufferAttribute(f,O+2),z.subVectors(o,u),R.subVectors(d,u),z.cross(R),g.setXYZ(O+0,z.x,z.y,z.z),g.setXYZ(O+1,z.x,z.y,z.z),g.setXYZ(O+2,z.x,z.y,z.z);this.normalizeNormals(),g.needsUpdate=!0}}normalizeNormals(){const p=this.attributes.normal;for(let f=0,g=p.count;f<g;f++)c.fromBufferAttribute(p,f),c.normalize(),p.setXYZ(f,c.x,c.y,c.z)}toNonIndexed(){function p(S,T){const B=S.array,z=S.itemSize,R=S.normalized,O=new B.constructor(T.length*z);let U=0,L=0;for(let H=0,Q=T.length;H<Q;H++){S.isInterleavedBufferAttribute?U=T[H]*S.data.stride+S.offset:U=T[H]*z;for(let it=0;it<z;it++)O[L++]=B[U++]}return new n.TH(O,z,R)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const f=new v,g=this.index.array,d=this.attributes;for(const S in d){const T=d[S],B=p(T,g);f.setAttribute(S,B)}const u=this.morphAttributes;for(const S in u){const T=[],B=u[S];for(let z=0,R=B.length;z<R;z++){const O=B[z],U=p(O,g);T.push(U)}f.morphAttributes[S]=T}f.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let S=0,T=o.length;S<T;S++){const B=o[S];f.addGroup(B.start,B.count,B.materialIndex)}return f}toJSON(){const p={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(p.uuid=this.uuid,p.type=this.type,this.name!==""&&(p.name=this.name),Object.keys(this.userData).length>0&&(p.userData=this.userData),this.parameters!==void 0){const T=this.parameters;for(const B in T)T[B]!==void 0&&(p[B]=T[B]);return p}p.data={attributes:{}};const f=this.index;f!==null&&(p.data.index={type:f.array.constructor.name,array:Array.prototype.slice.call(f.array)});const g=this.attributes;for(const T in g){const B=g[T];p.data.attributes[T]=B.toJSON(p.data)}const d={};let u=!1;for(const T in this.morphAttributes){const B=this.morphAttributes[T],z=[];for(let R=0,O=B.length;R<O;R++){const U=B[R];z.push(U.toJSON(p.data))}z.length>0&&(d[T]=z,u=!0)}u&&(p.data.morphAttributes=d,p.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(p.data.groups=JSON.parse(JSON.stringify(o)));const S=this.boundingSphere;return S!==null&&(p.data.boundingSphere=S.toJSON()),p}clone(){return new this.constructor().copy(this)}copy(p){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const f={};this.name=p.name;const g=p.index;g!==null&&this.setIndex(g.clone());const d=p.attributes;for(const B in d){const z=d[B];this.setAttribute(B,z.clone(f))}const u=p.morphAttributes;for(const B in u){const z=[],R=u[B];for(let O=0,U=R.length;O<U;O++)z.push(R[O].clone(f));this.morphAttributes[B]=z}this.morphTargetsRelative=p.morphTargetsRelative;const o=p.groups;for(let B=0,z=o.length;B<z;B++){const R=o[B];this.addGroup(R.start,R.count,R.materialIndex)}const S=p.boundingBox;S!==null&&(this.boundingBox=S.clone());const T=p.boundingSphere;return T!==null&&(this.boundingSphere=T.clone()),this.drawRange.start=p.drawRange.start,this.drawRange.count=p.drawRange.count,this.userData=p.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}},251750:(J,F,E)=>{E.d(F,{Q:()=>w});class w{addEventListener(A,i){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[A]===void 0&&(n[A]=[]),n[A].indexOf(i)===-1&&n[A].push(i)}hasEventListener(A,i){const n=this._listeners;return n===void 0?!1:n[A]!==void 0&&n[A].indexOf(i)!==-1}removeEventListener(A,i){const n=this._listeners;if(n===void 0)return;const _=n[A];if(_!==void 0){const x=_.indexOf(i);x!==-1&&_.splice(x,1)}}dispatchEvent(A){const i=this._listeners;if(i===void 0)return;const n=i[A.type];if(n!==void 0){A.target=this;const _=n.slice(0);for(let x=0,h=_.length;x<h;x++)_[x].call(this,A);A.target=null}}}},752853:(J,F,E)=>{E.d(F,{z:()=>w});class w{constructor(){this.mask=1}set(A){this.mask=(1<<A|0)>>>0}enable(A){this.mask|=1<<A|0}enableAll(){this.mask=-1}toggle(A){this.mask^=1<<A|0}disable(A){this.mask&=~(1<<A|0)}disableAll(){this.mask=0}test(A){return(this.mask&A.mask)!==0}isEnabled(A){return(this.mask&(1<<A|0))!==0}}},493303:(J,F,E)=>{E.d(F,{B:()=>d});var w=E(716920),C=E(824954),A=E(541761),i=E(251750),n=E(430799),_=E(752853),x=E(914164),h=E(774153);let m=0;const a=new C.Vector3,s=new w.P,t=new A.k,e=new C.Vector3,r=new C.Vector3,l=new C.Vector3,y=new w.P,b=new C.Vector3(1,0,0),c=new C.Vector3(0,1,0),v=new C.Vector3(0,0,1),M={type:"added"},p={type:"removed"},f={type:"childadded",child:null},g={type:"childremoved",child:null};class d extends i.Q{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:m++}),this.uuid=(0,h.lk)(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=d.DEFAULT_UP.clone();const o=new C.Vector3,S=new n.O,T=new w.P,B=new C.Vector3(1,1,1);function z(){T.setFromEuler(S,!1)}function R(){S.setFromQuaternion(T,void 0,!1)}S._onChange(z),T._onChange(R),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:o},rotation:{configurable:!0,enumerable:!0,value:S},quaternion:{configurable:!0,enumerable:!0,value:T},scale:{configurable:!0,enumerable:!0,value:B},modelViewMatrix:{value:new A.k},normalMatrix:{value:new x.d}}),this.matrix=new A.k,this.matrixWorld=new A.k,this.matrixAutoUpdate=d.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=d.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _.z,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(o){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(o),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(o){return this.quaternion.premultiply(o),this}setRotationFromAxisAngle(o,S){this.quaternion.setFromAxisAngle(o,S)}setRotationFromEuler(o){this.quaternion.setFromEuler(o,!0)}setRotationFromMatrix(o){this.quaternion.setFromRotationMatrix(o)}setRotationFromQuaternion(o){this.quaternion.copy(o)}rotateOnAxis(o,S){return s.setFromAxisAngle(o,S),this.quaternion.multiply(s),this}rotateOnWorldAxis(o,S){return s.setFromAxisAngle(o,S),this.quaternion.premultiply(s),this}rotateX(o){return this.rotateOnAxis(b,o)}rotateY(o){return this.rotateOnAxis(c,o)}rotateZ(o){return this.rotateOnAxis(v,o)}translateOnAxis(o,S){return a.copy(o).applyQuaternion(this.quaternion),this.position.add(a.multiplyScalar(S)),this}translateX(o){return this.translateOnAxis(b,o)}translateY(o){return this.translateOnAxis(c,o)}translateZ(o){return this.translateOnAxis(v,o)}localToWorld(o){return this.updateWorldMatrix(!0,!1),o.applyMatrix4(this.matrixWorld)}worldToLocal(o){return this.updateWorldMatrix(!0,!1),o.applyMatrix4(t.copy(this.matrixWorld).invert())}lookAt(o,S,T){o.isVector3?e.copy(o):e.set(o,S,T);const B=this.parent;this.updateWorldMatrix(!0,!1),r.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(r,e,this.up):t.lookAt(e,r,this.up),this.quaternion.setFromRotationMatrix(t),B&&(t.extractRotation(B.matrixWorld),s.setFromRotationMatrix(t),this.quaternion.premultiply(s.invert()))}add(o){if(arguments.length>1){for(let S=0;S<arguments.length;S++)this.add(arguments[S]);return this}return o===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",o),this):(o&&o.isObject3D?(o.removeFromParent(),o.parent=this,this.children.push(o),o.dispatchEvent(M),f.child=o,this.dispatchEvent(f),f.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",o),this)}remove(o){if(arguments.length>1){for(let T=0;T<arguments.length;T++)this.remove(arguments[T]);return this}const S=this.children.indexOf(o);return S!==-1&&(o.parent=null,this.children.splice(S,1),o.dispatchEvent(p),g.child=o,this.dispatchEvent(g),g.child=null),this}removeFromParent(){const o=this.parent;return o!==null&&o.remove(this),this}clear(){return this.remove(...this.children)}attach(o){return this.updateWorldMatrix(!0,!1),t.copy(this.matrixWorld).invert(),o.parent!==null&&(o.parent.updateWorldMatrix(!0,!1),t.multiply(o.parent.matrixWorld)),o.applyMatrix4(t),o.removeFromParent(),o.parent=this,this.children.push(o),o.updateWorldMatrix(!1,!0),o.dispatchEvent(M),f.child=o,this.dispatchEvent(f),f.child=null,this}getObjectById(o){return this.getObjectByProperty("id",o)}getObjectByName(o){return this.getObjectByProperty("name",o)}getObjectByProperty(o,S){if(this[o]===S)return this;for(let T=0,B=this.children.length;T<B;T++){const R=this.children[T].getObjectByProperty(o,S);if(R!==void 0)return R}}getObjectsByProperty(o,S,T=[]){this[o]===S&&T.push(this);const B=this.children;for(let z=0,R=B.length;z<R;z++)B[z].getObjectsByProperty(o,S,T);return T}getWorldPosition(o){return this.updateWorldMatrix(!0,!1),o.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r,o,l),o}getWorldScale(o){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(r,y,o),o}getWorldDirection(o){this.updateWorldMatrix(!0,!1);const S=this.matrixWorld.elements;return o.set(S[8],S[9],S[10]).normalize()}raycast(){}traverse(o){o(this);const S=this.children;for(let T=0,B=S.length;T<B;T++)S[T].traverse(o)}traverseVisible(o){if(this.visible===!1)return;o(this);const S=this.children;for(let T=0,B=S.length;T<B;T++)S[T].traverseVisible(o)}traverseAncestors(o){const S=this.parent;S!==null&&(o(S),S.traverseAncestors(o))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(o){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||o)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,o=!0);const S=this.children;for(let T=0,B=S.length;T<B;T++)S[T].updateMatrixWorld(o)}updateWorldMatrix(o,S){const T=this.parent;if(o===!0&&T!==null&&T.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),S===!0){const B=this.children;for(let z=0,R=B.length;z<R;z++)B[z].updateWorldMatrix(!1,!0)}}toJSON(o){const S=o===void 0||typeof o=="string",T={};S&&(o={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},T.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const B={};B.uuid=this.uuid,B.type=this.type,this.name!==""&&(B.name=this.name),this.castShadow===!0&&(B.castShadow=!0),this.receiveShadow===!0&&(B.receiveShadow=!0),this.visible===!1&&(B.visible=!1),this.frustumCulled===!1&&(B.frustumCulled=!1),this.renderOrder!==0&&(B.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(B.userData=this.userData),B.layers=this.layers.mask,B.matrix=this.matrix.toArray(),B.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(B.matrixAutoUpdate=!1),this.isInstancedMesh&&(B.type="InstancedMesh",B.count=this.count,B.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(B.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(B.type="BatchedMesh",B.perObjectFrustumCulled=this.perObjectFrustumCulled,B.sortObjects=this.sortObjects,B.drawRanges=this._drawRanges,B.reservedRanges=this._reservedRanges,B.geometryInfo=this._geometryInfo.map(O=>({...O,boundingBox:O.boundingBox?O.boundingBox.toJSON():void 0,boundingSphere:O.boundingSphere?O.boundingSphere.toJSON():void 0})),B.instanceInfo=this._instanceInfo.map(O=>({...O})),B.availableInstanceIds=this._availableInstanceIds.slice(),B.availableGeometryIds=this._availableGeometryIds.slice(),B.nextIndexStart=this._nextIndexStart,B.nextVertexStart=this._nextVertexStart,B.geometryCount=this._geometryCount,B.maxInstanceCount=this._maxInstanceCount,B.maxVertexCount=this._maxVertexCount,B.maxIndexCount=this._maxIndexCount,B.geometryInitialized=this._geometryInitialized,B.matricesTexture=this._matricesTexture.toJSON(o),B.indirectTexture=this._indirectTexture.toJSON(o),this._colorsTexture!==null&&(B.colorsTexture=this._colorsTexture.toJSON(o)),this.boundingSphere!==null&&(B.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(B.boundingBox=this.boundingBox.toJSON()));function z(O,U){return O[U.uuid]===void 0&&(O[U.uuid]=U.toJSON(o)),U.uuid}if(this.isScene)this.background&&(this.background.isColor?B.background=this.background.toJSON():this.background.isTexture&&(B.background=this.background.toJSON(o).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(B.environment=this.environment.toJSON(o).uuid);else if(this.isMesh||this.isLine||this.isPoints){B.geometry=z(o.geometries,this.geometry);const O=this.geometry.parameters;if(O!==void 0&&O.shapes!==void 0){const U=O.shapes;if(Array.isArray(U))for(let L=0,H=U.length;L<H;L++){const Q=U[L];z(o.shapes,Q)}else z(o.shapes,U)}}if(this.isSkinnedMesh&&(B.bindMode=this.bindMode,B.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(z(o.skeletons,this.skeleton),B.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const O=[];for(let U=0,L=this.material.length;U<L;U++)O.push(z(o.materials,this.material[U]));B.material=O}else B.material=z(o.materials,this.material);if(this.children.length>0){B.children=[];for(let O=0;O<this.children.length;O++)B.children.push(this.children[O].toJSON(o).object)}if(this.animations.length>0){B.animations=[];for(let O=0;O<this.animations.length;O++){const U=this.animations[O];B.animations.push(z(o.animations,U))}}if(S){const O=R(o.geometries),U=R(o.materials),L=R(o.textures),H=R(o.images),Q=R(o.shapes),it=R(o.skeletons),Y=R(o.animations),Z=R(o.nodes);O.length>0&&(T.geometries=O),U.length>0&&(T.materials=U),L.length>0&&(T.textures=L),H.length>0&&(T.images=H),Q.length>0&&(T.shapes=Q),it.length>0&&(T.skeletons=it),Y.length>0&&(T.animations=Y),Z.length>0&&(T.nodes=Z)}return T.object=B,T;function R(O){const U=[];for(const L in O){const H=O[L];delete H.metadata,U.push(H)}return U}}clone(o){return new this.constructor().copy(this,o)}copy(o,S=!0){if(this.name=o.name,this.up.copy(o.up),this.position.copy(o.position),this.rotation.order=o.rotation.order,this.quaternion.copy(o.quaternion),this.scale.copy(o.scale),this.matrix.copy(o.matrix),this.matrixWorld.copy(o.matrixWorld),this.matrixAutoUpdate=o.matrixAutoUpdate,this.matrixWorldAutoUpdate=o.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=o.matrixWorldNeedsUpdate,this.layers.mask=o.layers.mask,this.visible=o.visible,this.castShadow=o.castShadow,this.receiveShadow=o.receiveShadow,this.frustumCulled=o.frustumCulled,this.renderOrder=o.renderOrder,this.animations=o.animations.slice(),this.userData=JSON.parse(JSON.stringify(o.userData)),S===!0)for(let T=0;T<o.children.length;T++){const B=o.children[T];this.add(B.clone())}return this}}d.DEFAULT_UP=new C.Vector3(0,1,0),d.DEFAULT_MATRIX_AUTO_UPDATE=!0,d.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0},422870:(J,F,E)=>{E.d(F,{b:()=>A});var w=E(5257),C=E(739920);class A extends w.L{constructor(n=1,_=1,x=1,h=1){super(),this.type="PlaneGeometry",this.parameters={width:n,height:_,widthSegments:x,heightSegments:h};const m=n/2,a=_/2,s=Math.floor(x),t=Math.floor(h),e=s+1,r=t+1,l=n/s,y=_/t,b=[],c=[],v=[],M=[];for(let p=0;p<r;p++){const f=p*y-a;for(let g=0;g<e;g++){const d=g*l-m;c.push(d,-f,0),v.push(0,0,1),M.push(g/s),M.push(1-p/t)}}for(let p=0;p<t;p++)for(let f=0;f<s;f++){const g=f+e*p,d=f+e*(p+1),u=f+1+e*(p+1),o=f+1+e*p;b.push(g,d,o),b.push(d,u,o)}this.setIndex(b),this.setAttribute("position",new C.qt(c,3)),this.setAttribute("normal",new C.qt(v,3)),this.setAttribute("uv",new C.qt(M,2))}copy(n){return super.copy(n),this.parameters=Object.assign({},n.parameters),this}static fromJSON(n){return new A(n.width,n.height,n.widthSegments,n.heightSegments)}}},238133:(J,F,E)=>{E.d(F,{i:()=>_});var w=E(339957),C=E(251750),A=E(272790),i=E(774153);let n=0;class _ extends C.Q{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:n++}),this.uuid=(0,i.lk)(),this.name="",this.type="Material",this.blending=A.NTi,this.side=A.hB5,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=A.ie2,this.blendDst=A.OuU,this.blendEquation=A.gO9,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new w.Q(0,0,0),this.blendAlpha=0,this.depthFunc=A.xSv,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=A.sKt,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=A.VVr,this.stencilZFail=A.VVr,this.stencilZPass=A.VVr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(h){this._alphaTest>0!=h>0&&this.version++,this._alphaTest=h}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(h){if(h!==void 0)for(const m in h){const a=h[m];if(a===void 0){console.warn(`THREE.Material: parameter '${m}' has value of undefined.`);continue}const s=this[m];if(s===void 0){console.warn(`THREE.Material: '${m}' is not a property of THREE.${this.type}.`);continue}s&&s.isColor?s.set(a):s&&s.isVector3&&a&&a.isVector3?s.copy(a):this[m]=a}}toJSON(h){const m=h===void 0||typeof h=="string";m&&(h={textures:{},images:{}});const a={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};a.uuid=this.uuid,a.type=this.type,this.name!==""&&(a.name=this.name),this.color&&this.color.isColor&&(a.color=this.color.getHex()),this.roughness!==void 0&&(a.roughness=this.roughness),this.metalness!==void 0&&(a.metalness=this.metalness),this.sheen!==void 0&&(a.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(a.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(a.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(a.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(a.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(a.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(a.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(a.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(a.shininess=this.shininess),this.clearcoat!==void 0&&(a.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(a.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(a.clearcoatMap=this.clearcoatMap.toJSON(h).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(a.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(h).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(a.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(h).uuid,a.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(a.dispersion=this.dispersion),this.iridescence!==void 0&&(a.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(a.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(a.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(a.iridescenceMap=this.iridescenceMap.toJSON(h).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(a.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(h).uuid),this.anisotropy!==void 0&&(a.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(a.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(a.anisotropyMap=this.anisotropyMap.toJSON(h).uuid),this.map&&this.map.isTexture&&(a.map=this.map.toJSON(h).uuid),this.matcap&&this.matcap.isTexture&&(a.matcap=this.matcap.toJSON(h).uuid),this.alphaMap&&this.alphaMap.isTexture&&(a.alphaMap=this.alphaMap.toJSON(h).uuid),this.lightMap&&this.lightMap.isTexture&&(a.lightMap=this.lightMap.toJSON(h).uuid,a.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(a.aoMap=this.aoMap.toJSON(h).uuid,a.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(a.bumpMap=this.bumpMap.toJSON(h).uuid,a.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(a.normalMap=this.normalMap.toJSON(h).uuid,a.normalMapType=this.normalMapType,a.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(a.displacementMap=this.displacementMap.toJSON(h).uuid,a.displacementScale=this.displacementScale,a.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(a.roughnessMap=this.roughnessMap.toJSON(h).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(a.metalnessMap=this.metalnessMap.toJSON(h).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(a.emissiveMap=this.emissiveMap.toJSON(h).uuid),this.specularMap&&this.specularMap.isTexture&&(a.specularMap=this.specularMap.toJSON(h).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(a.specularIntensityMap=this.specularIntensityMap.toJSON(h).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(a.specularColorMap=this.specularColorMap.toJSON(h).uuid),this.envMap&&this.envMap.isTexture&&(a.envMap=this.envMap.toJSON(h).uuid,this.combine!==void 0&&(a.combine=this.combine)),this.envMapRotation!==void 0&&(a.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(a.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(a.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(a.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(a.gradientMap=this.gradientMap.toJSON(h).uuid),this.transmission!==void 0&&(a.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(a.transmissionMap=this.transmissionMap.toJSON(h).uuid),this.thickness!==void 0&&(a.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(a.thicknessMap=this.thicknessMap.toJSON(h).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(a.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(a.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(a.size=this.size),this.shadowSide!==null&&(a.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(a.sizeAttenuation=this.sizeAttenuation),this.blending!==A.NTi&&(a.blending=this.blending),this.side!==A.hB5&&(a.side=this.side),this.vertexColors===!0&&(a.vertexColors=!0),this.opacity<1&&(a.opacity=this.opacity),this.transparent===!0&&(a.transparent=!0),this.blendSrc!==A.ie2&&(a.blendSrc=this.blendSrc),this.blendDst!==A.OuU&&(a.blendDst=this.blendDst),this.blendEquation!==A.gO9&&(a.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(a.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(a.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(a.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(a.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(a.blendAlpha=this.blendAlpha),this.depthFunc!==A.xSv&&(a.depthFunc=this.depthFunc),this.depthTest===!1&&(a.depthTest=this.depthTest),this.depthWrite===!1&&(a.depthWrite=this.depthWrite),this.colorWrite===!1&&(a.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(a.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==A.sKt&&(a.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(a.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(a.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==A.VVr&&(a.stencilFail=this.stencilFail),this.stencilZFail!==A.VVr&&(a.stencilZFail=this.stencilZFail),this.stencilZPass!==A.VVr&&(a.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(a.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(a.rotation=this.rotation),this.polygonOffset===!0&&(a.polygonOffset=!0),this.polygonOffsetFactor!==0&&(a.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(a.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(a.linewidth=this.linewidth),this.dashSize!==void 0&&(a.dashSize=this.dashSize),this.gapSize!==void 0&&(a.gapSize=this.gapSize),this.scale!==void 0&&(a.scale=this.scale),this.dithering===!0&&(a.dithering=!0),this.alphaTest>0&&(a.alphaTest=this.alphaTest),this.alphaHash===!0&&(a.alphaHash=!0),this.alphaToCoverage===!0&&(a.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(a.premultipliedAlpha=!0),this.forceSinglePass===!0&&(a.forceSinglePass=!0),this.wireframe===!0&&(a.wireframe=!0),this.wireframeLinewidth>1&&(a.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(a.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(a.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(a.flatShading=!0),this.visible===!1&&(a.visible=!1),this.toneMapped===!1&&(a.toneMapped=!1),this.fog===!1&&(a.fog=!1),Object.keys(this.userData).length>0&&(a.userData=this.userData);function s(t){const e=[];for(const r in t){const l=t[r];delete l.metadata,e.push(l)}return e}if(m){const t=s(h.textures),e=s(h.images);t.length>0&&(a.textures=t),e.length>0&&(a.images=e)}return a}clone(){return new this.constructor().copy(this)}copy(h){this.name=h.name,this.blending=h.blending,this.side=h.side,this.vertexColors=h.vertexColors,this.opacity=h.opacity,this.transparent=h.transparent,this.blendSrc=h.blendSrc,this.blendDst=h.blendDst,this.blendEquation=h.blendEquation,this.blendSrcAlpha=h.blendSrcAlpha,this.blendDstAlpha=h.blendDstAlpha,this.blendEquationAlpha=h.blendEquationAlpha,this.blendColor.copy(h.blendColor),this.blendAlpha=h.blendAlpha,this.depthFunc=h.depthFunc,this.depthTest=h.depthTest,this.depthWrite=h.depthWrite,this.stencilWriteMask=h.stencilWriteMask,this.stencilFunc=h.stencilFunc,this.stencilRef=h.stencilRef,this.stencilFuncMask=h.stencilFuncMask,this.stencilFail=h.stencilFail,this.stencilZFail=h.stencilZFail,this.stencilZPass=h.stencilZPass,this.stencilWrite=h.stencilWrite;const m=h.clippingPlanes;let a=null;if(m!==null){const s=m.length;a=new Array(s);for(let t=0;t!==s;++t)a[t]=m[t].clone()}return this.clippingPlanes=a,this.clipIntersection=h.clipIntersection,this.clipShadows=h.clipShadows,this.shadowSide=h.shadowSide,this.colorWrite=h.colorWrite,this.precision=h.precision,this.polygonOffset=h.polygonOffset,this.polygonOffsetFactor=h.polygonOffsetFactor,this.polygonOffsetUnits=h.polygonOffsetUnits,this.dithering=h.dithering,this.alphaTest=h.alphaTest,this.alphaHash=h.alphaHash,this.alphaToCoverage=h.alphaToCoverage,this.premultipliedAlpha=h.premultipliedAlpha,this.forceSinglePass=h.forceSinglePass,this.visible=h.visible,this.toneMapped=h.toneMapped,this.userData=JSON.parse(JSON.stringify(h.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(h){h===!0&&this.version++}}},51950:(J,F,E)=>{E.d(F,{V:()=>n});var w=E(238133),C=E(272790),A=E(339957),i=E(430799);class n extends w.i{constructor(x){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new A.Q(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new i.O,this.combine=C.caT,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(x)}copy(x){return super.copy(x),this.color.copy(x.color),this.map=x.map,this.lightMap=x.lightMap,this.lightMapIntensity=x.lightMapIntensity,this.aoMap=x.aoMap,this.aoMapIntensity=x.aoMapIntensity,this.specularMap=x.specularMap,this.alphaMap=x.alphaMap,this.envMap=x.envMap,this.envMapRotation.copy(x.envMapRotation),this.combine=x.combine,this.reflectivity=x.reflectivity,this.refractionRatio=x.refractionRatio,this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.wireframeLinecap=x.wireframeLinecap,this.wireframeLinejoin=x.wireframeLinejoin,this.fog=x.fog,this}}},295641:(J,F,E)=>{E.d(F,{C:()=>A});var w=E(238133),C=E(272790);class A extends w.i{constructor(n){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=C.Rkk,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(n)}copy(n){return super.copy(n),this.depthPacking=n.depthPacking,this.map=n.map,this.alphaMap=n.alphaMap,this.displacementMap=n.displacementMap,this.displacementScale=n.displacementScale,this.displacementBias=n.displacementBias,this.wireframe=n.wireframe,this.wireframeLinewidth=n.wireframeLinewidth,this}}},457803:(J,F,E)=>{E.d(F,{B:()=>n});var w=E(238133),C=E(671619);const A=`
void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}
`,i=`
void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}
`;class n extends w.i{constructor(x){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=A,this.fragmentShader=i,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,x!==void 0&&this.setValues(x)}copy(x){return super.copy(x),this.fragmentShader=x.fragmentShader,this.vertexShader=x.vertexShader,this.uniforms=(0,C.lx)(x.uniforms),this.uniformsGroups=(0,C.Jd)(x.uniformsGroups),this.defines=Object.assign({},x.defines),this.wireframe=x.wireframe,this.wireframeLinewidth=x.wireframeLinewidth,this.fog=x.fog,this.lights=x.lights,this.clipping=x.clipping,this.extensions=Object.assign({},x.extensions),this.glslVersion=x.glslVersion,this}toJSON(x){const h=super.toJSON(x);h.glslVersion=this.glslVersion,h.uniforms={};for(const a in this.uniforms){const t=this.uniforms[a].value;t&&t.isTexture?h.uniforms[a]={type:"t",value:t.toJSON(x).uuid}:t&&t.isColor?h.uniforms[a]={type:"c",value:t.getHex()}:t&&t.isVector2?h.uniforms[a]={type:"v2",value:t.toArray()}:t&&t.isVector3?h.uniforms[a]={type:"v3",value:t.toArray()}:t&&t.isVector4?h.uniforms[a]={type:"v4",value:t.toArray()}:t&&t.isMatrix3?h.uniforms[a]={type:"m3",value:t.toArray()}:t&&t.isMatrix4?h.uniforms[a]={type:"m4",value:t.toArray()}:h.uniforms[a]={value:t}}Object.keys(this.defines).length>0&&(h.defines=this.defines),h.vertexShader=this.vertexShader,h.fragmentShader=this.fragmentShader,h.lights=this.lights,h.clipping=this.clipping;const m={};for(const a in this.extensions)this.extensions[a]===!0&&(m[a]=!0);return Object.keys(m).length>0&&(h.extensions=m),h}}},523006:(J,F,E)=>{E.r(F),E.d(F,{Box3:()=>C});var w=E(824954);class C{constructor(c=new w.Vector3(1/0,1/0,1/0),v=new w.Vector3(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=c,this.max=v}set(c,v){return this.min.copy(c),this.max.copy(v),this}setFromArray(c){this.makeEmpty();for(let v=0,M=c.length;v<M;v+=3)this.expandByPoint(i.fromArray(c,v));return this}setFromBufferAttribute(c){this.makeEmpty();for(let v=0,M=c.count;v<M;v++)this.expandByPoint(i.fromBufferAttribute(c,v));return this}setFromPoints(c){this.makeEmpty();for(let v=0,M=c.length;v<M;v++)this.expandByPoint(c[v]);return this}setFromCenterAndSize(c,v){const M=i.copy(v).multiplyScalar(.5);return this.min.copy(c).sub(M),this.max.copy(c).add(M),this}setFromObject(c,v=!1){return this.makeEmpty(),this.expandByObject(c,v)}clone(){return new this.constructor().copy(this)}copy(c){return this.min.copy(c.min),this.max.copy(c.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(c){return this.isEmpty()?c.set(0,0,0):c.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(c){return this.isEmpty()?c.set(0,0,0):c.subVectors(this.max,this.min)}expandByPoint(c){return this.min.min(c),this.max.max(c),this}expandByVector(c){return this.min.sub(c),this.max.add(c),this}expandByScalar(c){return this.min.addScalar(-c),this.max.addScalar(c),this}expandByObject(c,v=!1){c.updateWorldMatrix(!1,!1);const M=c.geometry;if(M!==void 0){const f=M.getAttribute("position");if(v===!0&&f!==void 0&&c.isInstancedMesh!==!0)for(let g=0,d=f.count;g<d;g++)c.isMesh===!0?c.getVertexPosition(g,i):i.fromBufferAttribute(f,g),i.applyMatrix4(c.matrixWorld),this.expandByPoint(i);else c.boundingBox!==void 0?(c.boundingBox===null&&c.computeBoundingBox(),n.copy(c.boundingBox)):(M.boundingBox===null&&M.computeBoundingBox(),n.copy(M.boundingBox)),n.applyMatrix4(c.matrixWorld),this.union(n)}const p=c.children;for(let f=0,g=p.length;f<g;f++)this.expandByObject(p[f],v);return this}containsPoint(c){return c.x>=this.min.x&&c.x<=this.max.x&&c.y>=this.min.y&&c.y<=this.max.y&&c.z>=this.min.z&&c.z<=this.max.z}containsBox(c){return this.min.x<=c.min.x&&c.max.x<=this.max.x&&this.min.y<=c.min.y&&c.max.y<=this.max.y&&this.min.z<=c.min.z&&c.max.z<=this.max.z}getParameter(c,v){return v.set((c.x-this.min.x)/(this.max.x-this.min.x),(c.y-this.min.y)/(this.max.y-this.min.y),(c.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(c){return c.max.x>=this.min.x&&c.min.x<=this.max.x&&c.max.y>=this.min.y&&c.min.y<=this.max.y&&c.max.z>=this.min.z&&c.min.z<=this.max.z}intersectsSphere(c){return this.clampPoint(c.center,i),i.distanceToSquared(c.center)<=c.radius*c.radius}intersectsPlane(c){let v,M;return c.normal.x>0?(v=c.normal.x*this.min.x,M=c.normal.x*this.max.x):(v=c.normal.x*this.max.x,M=c.normal.x*this.min.x),c.normal.y>0?(v+=c.normal.y*this.min.y,M+=c.normal.y*this.max.y):(v+=c.normal.y*this.max.y,M+=c.normal.y*this.min.y),c.normal.z>0?(v+=c.normal.z*this.min.z,M+=c.normal.z*this.max.z):(v+=c.normal.z*this.max.z,M+=c.normal.z*this.min.z),v<=-c.constant&&M>=-c.constant}intersectsTriangle(c){if(this.isEmpty())return!1;this.getCenter(t),e.subVectors(this.max,t),_.subVectors(c.a,t),x.subVectors(c.b,t),h.subVectors(c.c,t),m.subVectors(x,_),a.subVectors(h,x),s.subVectors(_,h);let v=[0,-m.z,m.y,0,-a.z,a.y,0,-s.z,s.y,m.z,0,-m.x,a.z,0,-a.x,s.z,0,-s.x,-m.y,m.x,0,-a.y,a.x,0,-s.y,s.x,0];return!y(v,_,x,h,e)||(v=[1,0,0,0,1,0,0,0,1],!y(v,_,x,h,e))?!1:(r.crossVectors(m,a),v=[r.x,r.y,r.z],y(v,_,x,h,e))}clampPoint(c,v){return v.copy(c).clamp(this.min,this.max)}distanceToPoint(c){return this.clampPoint(c,i).distanceTo(c)}getBoundingSphere(c){return this.isEmpty()?c.makeEmpty():(this.getCenter(c.center),c.radius=this.getSize(i).length()*.5),c}intersect(c){return this.min.max(c.min),this.max.min(c.max),this.isEmpty()&&this.makeEmpty(),this}union(c){return this.min.min(c.min),this.max.max(c.max),this}applyMatrix4(c){return this.isEmpty()?this:(A[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(c),A[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(c),A[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(c),A[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(c),A[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(c),A[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(c),A[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(c),A[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(c),this.setFromPoints(A),this)}translate(c){return this.min.add(c),this.max.add(c),this}equals(c){return c.min.equals(this.min)&&c.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(c){return this.min.fromArray(c.min),this.max.fromArray(c.max),this}}const A=[new w.Vector3,new w.Vector3,new w.Vector3,new w.Vector3,new w.Vector3,new w.Vector3,new w.Vector3,new w.Vector3],i=new w.Vector3,n=new C,_=new w.Vector3,x=new w.Vector3,h=new w.Vector3,m=new w.Vector3,a=new w.Vector3,s=new w.Vector3,t=new w.Vector3,e=new w.Vector3,r=new w.Vector3,l=new w.Vector3;function y(b,c,v,M,p){for(let f=0,g=b.length-3;f<=g;f+=3){l.fromArray(b,f);const d=p.x*Math.abs(l.x)+p.y*Math.abs(l.y)+p.z*Math.abs(l.z),u=c.dot(l),o=v.dot(l),S=M.dot(l);if(Math.max(-Math.max(u,o,S),Math.min(u,o,S))>d)return!1}return!0}},339957:(J,F,E)=>{E.d(F,{Q:()=>h});var w=E(774153),C=E(116898),A=E(272790);const i={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},n={h:0,s:0,l:0},_={h:0,s:0,l:0};function x(a,s,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?a+(s-a)*6*t:t<1/2?s:t<2/3?a+(s-a)*6*(2/3-t):a}class h{constructor(s,t,e){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(s,t,e)}set(s,t,e){if(t===void 0&&e===void 0){const r=s;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(s,t,e);return this}setScalar(s){return this.r=s,this.g=s,this.b=s,this}setHex(s,t=A.er$){return s=Math.floor(s),this.r=(s>>16&255)/255,this.g=(s>>8&255)/255,this.b=(s&255)/255,C.pp.colorSpaceToWorking(this,t),this}setRGB(s,t,e,r=C.pp.workingColorSpace){return this.r=s,this.g=t,this.b=e,C.pp.colorSpaceToWorking(this,r),this}setHSL(s,t,e,r=C.pp.workingColorSpace){if(s=(0,w.rl)(s,1),t=(0,w.qE)(t,0,1),e=(0,w.qE)(e,0,1),t===0)this.r=this.g=this.b=e;else{const l=e<=.5?e*(1+t):e+t-e*t,y=2*e-l;this.r=x(y,l,s+1/3),this.g=x(y,l,s),this.b=x(y,l,s-1/3)}return C.pp.colorSpaceToWorking(this,r),this}setStyle(s,t=A.er$){function e(l){l!==void 0&&parseFloat(l)<1&&console.warn("THREE.Color: Alpha component of "+s+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(s)){let l;const y=r[1],b=r[2];switch(y){case"rgb":case"rgba":if(l=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return e(l[4]),this.setRGB(Math.min(255,parseInt(l[1],10))/255,Math.min(255,parseInt(l[2],10))/255,Math.min(255,parseInt(l[3],10))/255,t);if(l=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return e(l[4]),this.setRGB(Math.min(100,parseInt(l[1],10))/100,Math.min(100,parseInt(l[2],10))/100,Math.min(100,parseInt(l[3],10))/100,t);break;case"hsl":case"hsla":if(l=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(b))return e(l[4]),this.setHSL(parseFloat(l[1])/360,parseFloat(l[2])/100,parseFloat(l[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+s)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(s)){const l=r[1],y=l.length;if(y===3)return this.setRGB(parseInt(l.charAt(0),16)/15,parseInt(l.charAt(1),16)/15,parseInt(l.charAt(2),16)/15,t);if(y===6)return this.setHex(parseInt(l,16),t);console.warn("THREE.Color: Invalid hex color "+s)}else if(s&&s.length>0)return this.setColorName(s,t);return this}setColorName(s,t=A.er$){const e=i[s.toLowerCase()];return e!==void 0?this.setHex(e,t):console.warn("THREE.Color: Unknown color "+s),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(s){return this.r=s.r,this.g=s.g,this.b=s.b,this}copySRGBToLinear(s){return this.r=(0,C.dk)(s.r),this.g=(0,C.dk)(s.g),this.b=(0,C.dk)(s.b),this}copyLinearToSRGB(s){return this.r=(0,C.rd)(s.r),this.g=(0,C.rd)(s.g),this.b=(0,C.rd)(s.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(s=A.er$){return C.pp.workingToColorSpace(m.copy(this),s),Math.round((0,w.qE)(m.r*255,0,255))*65536+Math.round((0,w.qE)(m.g*255,0,255))*256+Math.round((0,w.qE)(m.b*255,0,255))}getHexString(s=A.er$){return("000000"+this.getHex(s).toString(16)).slice(-6)}getHSL(s,t=C.pp.workingColorSpace){C.pp.workingToColorSpace(m.copy(this),t);const e=m.r,r=m.g,l=m.b,y=Math.max(e,r,l),b=Math.min(e,r,l);let c,v;const M=(b+y)/2;if(b===y)c=0,v=0;else{const p=y-b;switch(v=M<=.5?p/(y+b):p/(2-y-b),y){case e:c=(r-l)/p+(r<l?6:0);break;case r:c=(l-e)/p+2;break;case l:c=(e-r)/p+4;break}c/=6}return s.h=c,s.s=v,s.l=M,s}getRGB(s,t=C.pp.workingColorSpace){return C.pp.workingToColorSpace(m.copy(this),t),s.r=m.r,s.g=m.g,s.b=m.b,s}getStyle(s=A.er$){C.pp.workingToColorSpace(m.copy(this),s);const t=m.r,e=m.g,r=m.b;return s!==A.er$?`color(${s} ${t.toFixed(3)} ${e.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(e*255)},${Math.round(r*255)})`}offsetHSL(s,t,e){return this.getHSL(n),this.setHSL(n.h+s,n.s+t,n.l+e)}add(s){return this.r+=s.r,this.g+=s.g,this.b+=s.b,this}addColors(s,t){return this.r=s.r+t.r,this.g=s.g+t.g,this.b=s.b+t.b,this}addScalar(s){return this.r+=s,this.g+=s,this.b+=s,this}sub(s){return this.r=Math.max(0,this.r-s.r),this.g=Math.max(0,this.g-s.g),this.b=Math.max(0,this.b-s.b),this}multiply(s){return this.r*=s.r,this.g*=s.g,this.b*=s.b,this}multiplyScalar(s){return this.r*=s,this.g*=s,this.b*=s,this}lerp(s,t){return this.r+=(s.r-this.r)*t,this.g+=(s.g-this.g)*t,this.b+=(s.b-this.b)*t,this}lerpColors(s,t,e){return this.r=s.r+(t.r-s.r)*e,this.g=s.g+(t.g-s.g)*e,this.b=s.b+(t.b-s.b)*e,this}lerpHSL(s,t){this.getHSL(n),s.getHSL(_);const e=(0,w.Cc)(n.h,_.h,t),r=(0,w.Cc)(n.s,_.s,t),l=(0,w.Cc)(n.l,_.l,t);return this.setHSL(e,r,l),this}setFromVector3(s){return this.r=s.x,this.g=s.y,this.b=s.z,this}applyMatrix3(s){const t=this.r,e=this.g,r=this.b,l=s.elements;return this.r=l[0]*t+l[3]*e+l[6]*r,this.g=l[1]*t+l[4]*e+l[7]*r,this.b=l[2]*t+l[5]*e+l[8]*r,this}equals(s){return s.r===this.r&&s.g===this.g&&s.b===this.b}fromArray(s,t=0){return this.r=s[t],this.g=s[t+1],this.b=s[t+2],this}toArray(s=[],t=0){return s[t]=this.r,s[t+1]=this.g,s[t+2]=this.b,s}fromBufferAttribute(s,t){return this.r=s.getX(t),this.g=s.getY(t),this.b=s.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const m=new h;h.NAMES=i},116898:(J,F,E)=>{E.d(F,{dk:()=>h,pp:()=>x,rd:()=>m});var w=E(272790),C=E(914164),A=E(472686);const i=new C.d().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),n=new C.d().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function _(){const a={enabled:!0,workingColorSpace:w.Zr2,spaces:{},convert:function(r,l,y){return this.enabled===!1||l===y||!l||!y||(this.spaces[l].transfer===w.KLL&&(r.r=h(r.r),r.g=h(r.g),r.b=h(r.b)),this.spaces[l].primaries!==this.spaces[y].primaries&&(r.applyMatrix3(this.spaces[l].toXYZ),r.applyMatrix3(this.spaces[y].fromXYZ)),this.spaces[y].transfer===w.KLL&&(r.r=m(r.r),r.g=m(r.g),r.b=m(r.b))),r},workingToColorSpace:function(r,l){return this.convert(r,this.workingColorSpace,l)},colorSpaceToWorking:function(r,l){return this.convert(r,l,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===w.jf0?w.VxR:this.spaces[r].transfer},getLuminanceCoefficients:function(r,l=this.workingColorSpace){return r.fromArray(this.spaces[l].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,l,y){return r.copy(this.spaces[l].toXYZ).multiply(this.spaces[y].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,l){return(0,A.mc)("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),a.workingToColorSpace(r,l)},toWorkingColorSpace:function(r,l){return(0,A.mc)("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),a.colorSpaceToWorking(r,l)}},s=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],e=[.3127,.329];return a.define({[w.Zr2]:{primaries:s,whitePoint:e,transfer:w.VxR,toXYZ:i,fromXYZ:n,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:w.er$},outputColorSpaceConfig:{drawingBufferColorSpace:w.er$}},[w.er$]:{primaries:s,whitePoint:e,transfer:w.KLL,toXYZ:i,fromXYZ:n,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:w.er$}}}),a}const x=_();function h(a){return a<.04045?a*.0773993808:Math.pow(a*.9478672986+.0521327014,2.4)}function m(a){return a<.0031308?a*12.92:1.055*Math.pow(a,.41666)-.055}},430799:(J,F,E)=>{E.d(F,{O:()=>_});var w=E(716920),C=E(541761),A=E(774153);const i=new C.k,n=new w.P;class _{constructor(h=0,m=0,a=0,s=_.DEFAULT_ORDER){this.isEuler=!0,this._x=h,this._y=m,this._z=a,this._order=s}get x(){return this._x}set x(h){this._x=h,this._onChangeCallback()}get y(){return this._y}set y(h){this._y=h,this._onChangeCallback()}get z(){return this._z}set z(h){this._z=h,this._onChangeCallback()}get order(){return this._order}set order(h){this._order=h,this._onChangeCallback()}set(h,m,a,s=this._order){return this._x=h,this._y=m,this._z=a,this._order=s,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(h){return this._x=h._x,this._y=h._y,this._z=h._z,this._order=h._order,this._onChangeCallback(),this}setFromRotationMatrix(h,m=this._order,a=!0){const s=h.elements,t=s[0],e=s[4],r=s[8],l=s[1],y=s[5],b=s[9],c=s[2],v=s[6],M=s[10];switch(m){case"XYZ":this._y=Math.asin((0,A.qE)(r,-1,1)),Math.abs(r)<.9999999?(this._x=Math.atan2(-b,M),this._z=Math.atan2(-e,t)):(this._x=Math.atan2(v,y),this._z=0);break;case"YXZ":this._x=Math.asin(-(0,A.qE)(b,-1,1)),Math.abs(b)<.9999999?(this._y=Math.atan2(r,M),this._z=Math.atan2(l,y)):(this._y=Math.atan2(-c,t),this._z=0);break;case"ZXY":this._x=Math.asin((0,A.qE)(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-c,M),this._z=Math.atan2(-e,y)):(this._y=0,this._z=Math.atan2(l,t));break;case"ZYX":this._y=Math.asin(-(0,A.qE)(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(v,M),this._z=Math.atan2(l,t)):(this._x=0,this._z=Math.atan2(-e,y));break;case"YZX":this._z=Math.asin((0,A.qE)(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-b,y),this._y=Math.atan2(-c,t)):(this._x=0,this._y=Math.atan2(r,M));break;case"XZY":this._z=Math.asin(-(0,A.qE)(e,-1,1)),Math.abs(e)<.9999999?(this._x=Math.atan2(v,y),this._y=Math.atan2(r,t)):(this._x=Math.atan2(-b,M),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+m)}return this._order=m,a===!0&&this._onChangeCallback(),this}setFromQuaternion(h,m,a){return i.makeRotationFromQuaternion(h),this.setFromRotationMatrix(i,m,a)}setFromVector3(h,m=this._order){return this.set(h.x,h.y,h.z,m)}reorder(h){return n.setFromEuler(this),this.setFromQuaternion(n,h)}equals(h){return h._x===this._x&&h._y===this._y&&h._z===this._z&&h._order===this._order}fromArray(h){return this._x=h[0],this._y=h[1],this._z=h[2],h[3]!==void 0&&(this._order=h[3]),this._onChangeCallback(),this}toArray(h=[],m=0){return h[m]=this._x,h[m+1]=this._y,h[m+2]=this._z,h[m+3]=this._order,h}_onChange(h){return this._onChangeCallback=h,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}_.DEFAULT_ORDER="XYZ"},914164:(J,F,E)=>{E.d(F,{d:()=>w});class w{constructor(i,n,_,x,h,m,a,s,t){w.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],i!==void 0&&this.set(i,n,_,x,h,m,a,s,t)}set(i,n,_,x,h,m,a,s,t){const e=this.elements;return e[0]=i,e[1]=x,e[2]=a,e[3]=n,e[4]=h,e[5]=s,e[6]=_,e[7]=m,e[8]=t,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(i){const n=this.elements,_=i.elements;return n[0]=_[0],n[1]=_[1],n[2]=_[2],n[3]=_[3],n[4]=_[4],n[5]=_[5],n[6]=_[6],n[7]=_[7],n[8]=_[8],this}extractBasis(i,n,_){return i.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),_.setFromMatrix3Column(this,2),this}setFromMatrix4(i){const n=i.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(i){return this.multiplyMatrices(this,i)}premultiply(i){return this.multiplyMatrices(i,this)}multiplyMatrices(i,n){const _=i.elements,x=n.elements,h=this.elements,m=_[0],a=_[3],s=_[6],t=_[1],e=_[4],r=_[7],l=_[2],y=_[5],b=_[8],c=x[0],v=x[3],M=x[6],p=x[1],f=x[4],g=x[7],d=x[2],u=x[5],o=x[8];return h[0]=m*c+a*p+s*d,h[3]=m*v+a*f+s*u,h[6]=m*M+a*g+s*o,h[1]=t*c+e*p+r*d,h[4]=t*v+e*f+r*u,h[7]=t*M+e*g+r*o,h[2]=l*c+y*p+b*d,h[5]=l*v+y*f+b*u,h[8]=l*M+y*g+b*o,this}multiplyScalar(i){const n=this.elements;return n[0]*=i,n[3]*=i,n[6]*=i,n[1]*=i,n[4]*=i,n[7]*=i,n[2]*=i,n[5]*=i,n[8]*=i,this}determinant(){const i=this.elements,n=i[0],_=i[1],x=i[2],h=i[3],m=i[4],a=i[5],s=i[6],t=i[7],e=i[8];return n*m*e-n*a*t-_*h*e+_*a*s+x*h*t-x*m*s}invert(){const i=this.elements,n=i[0],_=i[1],x=i[2],h=i[3],m=i[4],a=i[5],s=i[6],t=i[7],e=i[8],r=e*m-a*t,l=a*s-e*h,y=t*h-m*s,b=n*r+_*l+x*y;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const c=1/b;return i[0]=r*c,i[1]=(x*t-e*_)*c,i[2]=(a*_-x*m)*c,i[3]=l*c,i[4]=(e*n-x*s)*c,i[5]=(x*h-a*n)*c,i[6]=y*c,i[7]=(_*s-t*n)*c,i[8]=(m*n-_*h)*c,this}transpose(){let i;const n=this.elements;return i=n[1],n[1]=n[3],n[3]=i,i=n[2],n[2]=n[6],n[6]=i,i=n[5],n[5]=n[7],n[7]=i,this}getNormalMatrix(i){return this.setFromMatrix4(i).invert().transpose()}transposeIntoArray(i){const n=this.elements;return i[0]=n[0],i[1]=n[3],i[2]=n[6],i[3]=n[1],i[4]=n[4],i[5]=n[7],i[6]=n[2],i[7]=n[5],i[8]=n[8],this}setUvTransform(i,n,_,x,h,m,a){const s=Math.cos(h),t=Math.sin(h);return this.set(_*s,_*t,-_*(s*m+t*a)+m+i,-x*t,x*s,-x*(-t*m+s*a)+a+n,0,0,1),this}scale(i,n){return this.premultiply(C.makeScale(i,n)),this}rotate(i){return this.premultiply(C.makeRotation(-i)),this}translate(i,n){return this.premultiply(C.makeTranslation(i,n)),this}makeTranslation(i,n){return i.isVector2?this.set(1,0,i.x,0,1,i.y,0,0,1):this.set(1,0,i,0,1,n,0,0,1),this}makeRotation(i){const n=Math.cos(i),_=Math.sin(i);return this.set(n,-_,0,_,n,0,0,0,1),this}makeScale(i,n){return this.set(i,0,0,0,n,0,0,0,1),this}equals(i){const n=this.elements,_=i.elements;for(let x=0;x<9;x++)if(n[x]!==_[x])return!1;return!0}fromArray(i,n=0){for(let _=0;_<9;_++)this.elements[_]=i[_+n];return this}toArray(i=[],n=0){const _=this.elements;return i[n]=_[0],i[n+1]=_[1],i[n+2]=_[2],i[n+3]=_[3],i[n+4]=_[4],i[n+5]=_[5],i[n+6]=_[6],i[n+7]=_[7],i[n+8]=_[8],i}clone(){return new this.constructor().fromArray(this.elements)}}const C=new w},541761:(J,F,E)=>{E.d(F,{k:()=>A});var w=E(272790),C=E(824954);class A{constructor(t,e,r,l,y,b,c,v,M,p,f,g,d,u,o,S){A.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,r,l,y,b,c,v,M,p,f,g,d,u,o,S)}set(t,e,r,l,y,b,c,v,M,p,f,g,d,u,o,S){const T=this.elements;return T[0]=t,T[4]=e,T[8]=r,T[12]=l,T[1]=y,T[5]=b,T[9]=c,T[13]=v,T[2]=M,T[6]=p,T[10]=f,T[14]=g,T[3]=d,T[7]=u,T[11]=o,T[15]=S,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new A().fromArray(this.elements)}copy(t){const e=this.elements,r=t.elements;return e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e[4]=r[4],e[5]=r[5],e[6]=r[6],e[7]=r[7],e[8]=r[8],e[9]=r[9],e[10]=r[10],e[11]=r[11],e[12]=r[12],e[13]=r[13],e[14]=r[14],e[15]=r[15],this}copyPosition(t){const e=this.elements,r=t.elements;return e[12]=r[12],e[13]=r[13],e[14]=r[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,r){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),r.setFromMatrixColumn(this,2),this}makeBasis(t,e,r){return this.set(t.x,e.x,r.x,0,t.y,e.y,r.y,0,t.z,e.z,r.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,r=t.elements,l=1/i.setFromMatrixColumn(t,0).length(),y=1/i.setFromMatrixColumn(t,1).length(),b=1/i.setFromMatrixColumn(t,2).length();return e[0]=r[0]*l,e[1]=r[1]*l,e[2]=r[2]*l,e[3]=0,e[4]=r[4]*y,e[5]=r[5]*y,e[6]=r[6]*y,e[7]=0,e[8]=r[8]*b,e[9]=r[9]*b,e[10]=r[10]*b,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,r=t.x,l=t.y,y=t.z,b=Math.cos(r),c=Math.sin(r),v=Math.cos(l),M=Math.sin(l),p=Math.cos(y),f=Math.sin(y);if(t.order==="XYZ"){const g=b*p,d=b*f,u=c*p,o=c*f;e[0]=v*p,e[4]=-v*f,e[8]=M,e[1]=d+u*M,e[5]=g-o*M,e[9]=-c*v,e[2]=o-g*M,e[6]=u+d*M,e[10]=b*v}else if(t.order==="YXZ"){const g=v*p,d=v*f,u=M*p,o=M*f;e[0]=g+o*c,e[4]=u*c-d,e[8]=b*M,e[1]=b*f,e[5]=b*p,e[9]=-c,e[2]=d*c-u,e[6]=o+g*c,e[10]=b*v}else if(t.order==="ZXY"){const g=v*p,d=v*f,u=M*p,o=M*f;e[0]=g-o*c,e[4]=-b*f,e[8]=u+d*c,e[1]=d+u*c,e[5]=b*p,e[9]=o-g*c,e[2]=-b*M,e[6]=c,e[10]=b*v}else if(t.order==="ZYX"){const g=b*p,d=b*f,u=c*p,o=c*f;e[0]=v*p,e[4]=u*M-d,e[8]=g*M+o,e[1]=v*f,e[5]=o*M+g,e[9]=d*M-u,e[2]=-M,e[6]=c*v,e[10]=b*v}else if(t.order==="YZX"){const g=b*v,d=b*M,u=c*v,o=c*M;e[0]=v*p,e[4]=o-g*f,e[8]=u*f+d,e[1]=f,e[5]=b*p,e[9]=-c*p,e[2]=-M*p,e[6]=d*f+u,e[10]=g-o*f}else if(t.order==="XZY"){const g=b*v,d=b*M,u=c*v,o=c*M;e[0]=v*p,e[4]=-f,e[8]=M*p,e[1]=g*f+o,e[5]=b*p,e[9]=d*f-u,e[2]=u*f-d,e[6]=c*p,e[10]=o*f+g}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(_,t,x)}lookAt(t,e,r){const l=this.elements;return a.subVectors(t,e),a.lengthSq()===0&&(a.z=1),a.normalize(),h.crossVectors(r,a),h.lengthSq()===0&&(Math.abs(r.z)===1?a.x+=1e-4:a.z+=1e-4,a.normalize(),h.crossVectors(r,a)),h.normalize(),m.crossVectors(a,h),l[0]=h.x,l[4]=m.x,l[8]=a.x,l[1]=h.y,l[5]=m.y,l[9]=a.y,l[2]=h.z,l[6]=m.z,l[10]=a.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const r=t.elements,l=e.elements,y=this.elements,b=r[0],c=r[4],v=r[8],M=r[12],p=r[1],f=r[5],g=r[9],d=r[13],u=r[2],o=r[6],S=r[10],T=r[14],B=r[3],z=r[7],R=r[11],O=r[15],U=l[0],L=l[4],H=l[8],Q=l[12],it=l[1],Y=l[5],Z=l[9],D=l[13],P=l[2],k=l[6],V=l[10],I=l[14],j=l[3],N=l[7],W=l[11],X=l[15];return y[0]=b*U+c*it+v*P+M*j,y[4]=b*L+c*Y+v*k+M*N,y[8]=b*H+c*Z+v*V+M*W,y[12]=b*Q+c*D+v*I+M*X,y[1]=p*U+f*it+g*P+d*j,y[5]=p*L+f*Y+g*k+d*N,y[9]=p*H+f*Z+g*V+d*W,y[13]=p*Q+f*D+g*I+d*X,y[2]=u*U+o*it+S*P+T*j,y[6]=u*L+o*Y+S*k+T*N,y[10]=u*H+o*Z+S*V+T*W,y[14]=u*Q+o*D+S*I+T*X,y[3]=B*U+z*it+R*P+O*j,y[7]=B*L+z*Y+R*k+O*N,y[11]=B*H+z*Z+R*V+O*W,y[15]=B*Q+z*D+R*I+O*X,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],r=t[4],l=t[8],y=t[12],b=t[1],c=t[5],v=t[9],M=t[13],p=t[2],f=t[6],g=t[10],d=t[14],u=t[3],o=t[7],S=t[11],T=t[15];return u*(+y*v*f-l*M*f-y*c*g+r*M*g+l*c*d-r*v*d)+o*(+e*v*d-e*M*g+y*b*g-l*b*d+l*M*p-y*v*p)+S*(+e*M*f-e*c*d-y*b*f+r*b*d+y*c*p-r*M*p)+T*(-l*c*p-e*v*f+e*c*g+l*b*f-r*b*g+r*v*p)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,r){const l=this.elements;return t.isVector3?(l[12]=t.x,l[13]=t.y,l[14]=t.z):(l[12]=t,l[13]=e,l[14]=r),this}invert(){const t=this.elements,e=t[0],r=t[1],l=t[2],y=t[3],b=t[4],c=t[5],v=t[6],M=t[7],p=t[8],f=t[9],g=t[10],d=t[11],u=t[12],o=t[13],S=t[14],T=t[15],B=f*S*M-o*g*M+o*v*d-c*S*d-f*v*T+c*g*T,z=u*g*M-p*S*M-u*v*d+b*S*d+p*v*T-b*g*T,R=p*o*M-u*f*M+u*c*d-b*o*d-p*c*T+b*f*T,O=u*f*v-p*o*v-u*c*g+b*o*g+p*c*S-b*f*S,U=e*B+r*z+l*R+y*O;if(U===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const L=1/U;return t[0]=B*L,t[1]=(o*g*y-f*S*y-o*l*d+r*S*d+f*l*T-r*g*T)*L,t[2]=(c*S*y-o*v*y+o*l*M-r*S*M-c*l*T+r*v*T)*L,t[3]=(f*v*y-c*g*y-f*l*M+r*g*M+c*l*d-r*v*d)*L,t[4]=z*L,t[5]=(p*S*y-u*g*y+u*l*d-e*S*d-p*l*T+e*g*T)*L,t[6]=(u*v*y-b*S*y-u*l*M+e*S*M+b*l*T-e*v*T)*L,t[7]=(b*g*y-p*v*y+p*l*M-e*g*M-b*l*d+e*v*d)*L,t[8]=R*L,t[9]=(u*f*y-p*o*y-u*r*d+e*o*d+p*r*T-e*f*T)*L,t[10]=(b*o*y-u*c*y+u*r*M-e*o*M-b*r*T+e*c*T)*L,t[11]=(p*c*y-b*f*y-p*r*M+e*f*M+b*r*d-e*c*d)*L,t[12]=O*L,t[13]=(p*o*l-u*f*l+u*r*g-e*o*g-p*r*S+e*f*S)*L,t[14]=(u*c*l-b*o*l-u*r*v+e*o*v+b*r*S-e*c*S)*L,t[15]=(b*f*l-p*c*l+p*r*v-e*f*v-b*r*g+e*c*g)*L,this}scale(t){const e=this.elements,r=t.x,l=t.y,y=t.z;return e[0]*=r,e[4]*=l,e[8]*=y,e[1]*=r,e[5]*=l,e[9]*=y,e[2]*=r,e[6]*=l,e[10]*=y,e[3]*=r,e[7]*=l,e[11]*=y,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],r=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],l=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,r,l))}makeTranslation(t,e,r){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,r,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),r=Math.sin(t);return this.set(1,0,0,0,0,e,-r,0,0,r,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,0,r,0,0,1,0,0,-r,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),r=Math.sin(t);return this.set(e,-r,0,0,r,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const r=Math.cos(e),l=Math.sin(e),y=1-r,b=t.x,c=t.y,v=t.z,M=y*b,p=y*c;return this.set(M*b+r,M*c-l*v,M*v+l*c,0,M*c+l*v,p*c+r,p*v-l*b,0,M*v-l*c,p*v+l*b,y*v*v+r,0,0,0,0,1),this}makeScale(t,e,r){return this.set(t,0,0,0,0,e,0,0,0,0,r,0,0,0,0,1),this}makeShear(t,e,r,l,y,b){return this.set(1,r,y,0,t,1,b,0,e,l,1,0,0,0,0,1),this}compose(t,e,r){const l=this.elements,y=e._x,b=e._y,c=e._z,v=e._w,M=y+y,p=b+b,f=c+c,g=y*M,d=y*p,u=y*f,o=b*p,S=b*f,T=c*f,B=v*M,z=v*p,R=v*f,O=r.x,U=r.y,L=r.z;return l[0]=(1-(o+T))*O,l[1]=(d+R)*O,l[2]=(u-z)*O,l[3]=0,l[4]=(d-R)*U,l[5]=(1-(g+T))*U,l[6]=(S+B)*U,l[7]=0,l[8]=(u+z)*L,l[9]=(S-B)*L,l[10]=(1-(g+o))*L,l[11]=0,l[12]=t.x,l[13]=t.y,l[14]=t.z,l[15]=1,this}decompose(t,e,r){const l=this.elements;let y=i.set(l[0],l[1],l[2]).length();const b=i.set(l[4],l[5],l[6]).length(),c=i.set(l[8],l[9],l[10]).length();this.determinant()<0&&(y=-y),t.x=l[12],t.y=l[13],t.z=l[14],n.copy(this);const M=1/y,p=1/b,f=1/c;return n.elements[0]*=M,n.elements[1]*=M,n.elements[2]*=M,n.elements[4]*=p,n.elements[5]*=p,n.elements[6]*=p,n.elements[8]*=f,n.elements[9]*=f,n.elements[10]*=f,e.setFromRotationMatrix(n),r.x=y,r.y=b,r.z=c,this}makePerspective(t,e,r,l,y,b,c=w.TdN,v=!1){const M=this.elements,p=2*y/(e-t),f=2*y/(r-l),g=(e+t)/(e-t),d=(r+l)/(r-l);let u,o;if(v)u=y/(b-y),o=b*y/(b-y);else if(c===w.TdN)u=-(b+y)/(b-y),o=-2*b*y/(b-y);else if(c===w.i7u)u=-b/(b-y),o=-b*y/(b-y);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+c);return M[0]=p,M[4]=0,M[8]=g,M[12]=0,M[1]=0,M[5]=f,M[9]=d,M[13]=0,M[2]=0,M[6]=0,M[10]=u,M[14]=o,M[3]=0,M[7]=0,M[11]=-1,M[15]=0,this}makeOrthographic(t,e,r,l,y,b,c=w.TdN,v=!1){const M=this.elements,p=2/(e-t),f=2/(r-l),g=-(e+t)/(e-t),d=-(r+l)/(r-l);let u,o;if(v)u=1/(b-y),o=b/(b-y);else if(c===w.TdN)u=-2/(b-y),o=-(b+y)/(b-y);else if(c===w.i7u)u=-1/(b-y),o=-y/(b-y);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+c);return M[0]=p,M[4]=0,M[8]=0,M[12]=g,M[1]=0,M[5]=f,M[9]=0,M[13]=d,M[2]=0,M[6]=0,M[10]=u,M[14]=o,M[3]=0,M[7]=0,M[11]=0,M[15]=1,this}equals(t){const e=this.elements,r=t.elements;for(let l=0;l<16;l++)if(e[l]!==r[l])return!1;return!0}fromArray(t,e=0){for(let r=0;r<16;r++)this.elements[r]=t[r+e];return this}toArray(t=[],e=0){const r=this.elements;return t[e]=r[0],t[e+1]=r[1],t[e+2]=r[2],t[e+3]=r[3],t[e+4]=r[4],t[e+5]=r[5],t[e+6]=r[6],t[e+7]=r[7],t[e+8]=r[8],t[e+9]=r[9],t[e+10]=r[10],t[e+11]=r[11],t[e+12]=r[12],t[e+13]=r[13],t[e+14]=r[14],t[e+15]=r[15],t}}const i=new C.Vector3,n=new A,_=new C.Vector3(0,0,0),x=new C.Vector3(1,1,1),h=new C.Vector3,m=new C.Vector3,a=new C.Vector3},694454:(J,F,E)=>{E.d(F,{R:()=>m});var w=E(824954);const C=new w.Vector3,A=new w.Vector3,i=new w.Vector3,n=new w.Vector3,_=new w.Vector3,x=new w.Vector3,h=new w.Vector3;class m{constructor(s=new w.Vector3,t=new w.Vector3(0,0,-1)){this.origin=s,this.direction=t}set(s,t){return this.origin.copy(s),this.direction.copy(t),this}copy(s){return this.origin.copy(s.origin),this.direction.copy(s.direction),this}at(s,t){return t.copy(this.origin).addScaledVector(this.direction,s)}lookAt(s){return this.direction.copy(s).sub(this.origin).normalize(),this}recast(s){return this.origin.copy(this.at(s,C)),this}closestPointToPoint(s,t){t.subVectors(s,this.origin);const e=t.dot(this.direction);return e<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,e)}distanceToPoint(s){return Math.sqrt(this.distanceSqToPoint(s))}distanceSqToPoint(s){const t=C.subVectors(s,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(s):(C.copy(this.origin).addScaledVector(this.direction,t),C.distanceToSquared(s))}distanceSqToSegment(s,t,e,r){A.copy(s).add(t).multiplyScalar(.5),i.copy(t).sub(s).normalize(),n.copy(this.origin).sub(A);const l=s.distanceTo(t)*.5,y=-this.direction.dot(i),b=n.dot(this.direction),c=-n.dot(i),v=n.lengthSq(),M=Math.abs(1-y*y);let p,f,g,d;if(M>0)if(p=y*c-b,f=y*b-c,d=l*M,p>=0)if(f>=-d)if(f<=d){const u=1/M;p*=u,f*=u,g=p*(p+y*f+2*b)+f*(y*p+f+2*c)+v}else f=l,p=Math.max(0,-(y*f+b)),g=-p*p+f*(f+2*c)+v;else f=-l,p=Math.max(0,-(y*f+b)),g=-p*p+f*(f+2*c)+v;else f<=-d?(p=Math.max(0,-(-y*l+b)),f=p>0?-l:Math.min(Math.max(-l,-c),l),g=-p*p+f*(f+2*c)+v):f<=d?(p=0,f=Math.min(Math.max(-l,-c),l),g=f*(f+2*c)+v):(p=Math.max(0,-(y*l+b)),f=p>0?l:Math.min(Math.max(-l,-c),l),g=-p*p+f*(f+2*c)+v);else f=y>0?-l:l,p=Math.max(0,-(y*f+b)),g=-p*p+f*(f+2*c)+v;return e&&e.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(A).addScaledVector(i,f),g}intersectSphere(s,t){C.subVectors(s.center,this.origin);const e=C.dot(this.direction),r=C.dot(C)-e*e,l=s.radius*s.radius;if(r>l)return null;const y=Math.sqrt(l-r),b=e-y,c=e+y;return c<0?null:b<0?this.at(c,t):this.at(b,t)}intersectsSphere(s){return s.radius<0?!1:this.distanceSqToPoint(s.center)<=s.radius*s.radius}distanceToPlane(s){const t=s.normal.dot(this.direction);if(t===0)return s.distanceToPoint(this.origin)===0?0:null;const e=-(this.origin.dot(s.normal)+s.constant)/t;return e>=0?e:null}intersectPlane(s,t){const e=this.distanceToPlane(s);return e===null?null:this.at(e,t)}intersectsPlane(s){const t=s.distanceToPoint(this.origin);return t===0||s.normal.dot(this.direction)*t<0}intersectBox(s,t){let e,r,l,y,b,c;const v=1/this.direction.x,M=1/this.direction.y,p=1/this.direction.z,f=this.origin;return v>=0?(e=(s.min.x-f.x)*v,r=(s.max.x-f.x)*v):(e=(s.max.x-f.x)*v,r=(s.min.x-f.x)*v),M>=0?(l=(s.min.y-f.y)*M,y=(s.max.y-f.y)*M):(l=(s.max.y-f.y)*M,y=(s.min.y-f.y)*M),e>y||l>r||((l>e||isNaN(e))&&(e=l),(y<r||isNaN(r))&&(r=y),p>=0?(b=(s.min.z-f.z)*p,c=(s.max.z-f.z)*p):(b=(s.max.z-f.z)*p,c=(s.min.z-f.z)*p),e>c||b>r)||((b>e||e!==e)&&(e=b),(c<r||r!==r)&&(r=c),r<0)?null:this.at(e>=0?e:r,t)}intersectsBox(s){return this.intersectBox(s,C)!==null}intersectTriangle(s,t,e,r,l){_.subVectors(t,s),x.subVectors(e,s),h.crossVectors(_,x);let y=this.direction.dot(h),b;if(y>0){if(r)return null;b=1}else if(y<0)b=-1,y=-y;else return null;n.subVectors(this.origin,s);const c=b*this.direction.dot(x.crossVectors(n,x));if(c<0)return null;const v=b*this.direction.dot(_.cross(n));if(v<0||c+v>y)return null;const M=-b*n.dot(h);return M<0?null:this.at(M/y,l)}applyMatrix4(s){return this.origin.applyMatrix4(s),this.direction.transformDirection(s),this}equals(s){return s.origin.equals(this.origin)&&s.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}},721993:(J,F,E)=>{E.d(F,{i:()=>_});var w=E(523006),C=E(824954);const A=new w.Box3,i=new C.Vector3,n=new C.Vector3;class _{constructor(h=new C.Vector3,m=-1){this.isSphere=!0,this.center=h,this.radius=m}set(h,m){return this.center.copy(h),this.radius=m,this}setFromPoints(h,m){const a=this.center;m!==void 0?a.copy(m):A.setFromPoints(h).getCenter(a);let s=0;for(let t=0,e=h.length;t<e;t++)s=Math.max(s,a.distanceToSquared(h[t]));return this.radius=Math.sqrt(s),this}copy(h){return this.center.copy(h.center),this.radius=h.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(h){return h.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(h){return h.distanceTo(this.center)-this.radius}intersectsSphere(h){const m=this.radius+h.radius;return h.center.distanceToSquared(this.center)<=m*m}intersectsBox(h){return h.intersectsSphere(this)}intersectsPlane(h){return Math.abs(h.distanceToPoint(this.center))<=this.radius}clampPoint(h,m){const a=this.center.distanceToSquared(h);return m.copy(h),a>this.radius*this.radius&&(m.sub(this.center).normalize(),m.multiplyScalar(this.radius).add(this.center)),m}getBoundingBox(h){return this.isEmpty()?(h.makeEmpty(),h):(h.set(this.center,this.center),h.expandByScalar(this.radius),h)}applyMatrix4(h){return this.center.applyMatrix4(h),this.radius=this.radius*h.getMaxScaleOnAxis(),this}translate(h){return this.center.add(h),this}expandByPoint(h){if(this.isEmpty())return this.center.copy(h),this.radius=0,this;i.subVectors(h,this.center);const m=i.lengthSq();if(m>this.radius*this.radius){const a=Math.sqrt(m),s=(a-this.radius)*.5;this.center.addScaledVector(i,s/a),this.radius+=s}return this}union(h){return h.isEmpty()?this:this.isEmpty()?(this.copy(h),this):(this.center.equals(h.center)===!0?this.radius=Math.max(this.radius,h.radius):(n.subVectors(h.center,this.center).setLength(h.radius),this.expandByPoint(i.copy(h.center).add(n)),this.expandByPoint(i.copy(h.center).sub(n))),this)}equals(h){return h.center.equals(this.center)&&h.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(h){return this.radius=h.radius,this.center.fromArray(h.center),this}}},237481:(J,F,E)=>{E.d(F,{I:()=>C});var w=E(774153);class C{constructor(i=0,n=0){C.prototype.isVector2=!0,this.x=i,this.y=n}get width(){return this.x}set width(i){this.x=i}get height(){return this.y}set height(i){this.y=i}set(i,n){return this.x=i,this.y=n,this}setScalar(i){return this.x=i,this.y=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setComponent(i,n){switch(i){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y)}copy(i){return this.x=i.x,this.y=i.y,this}add(i){return this.x+=i.x,this.y+=i.y,this}addScalar(i){return this.x+=i,this.y+=i,this}addVectors(i,n){return this.x=i.x+n.x,this.y=i.y+n.y,this}addScaledVector(i,n){return this.x+=i.x*n,this.y+=i.y*n,this}sub(i){return this.x-=i.x,this.y-=i.y,this}subScalar(i){return this.x-=i,this.y-=i,this}subVectors(i,n){return this.x=i.x-n.x,this.y=i.y-n.y,this}multiply(i){return this.x*=i.x,this.y*=i.y,this}multiplyScalar(i){return this.x*=i,this.y*=i,this}divide(i){return this.x/=i.x,this.y/=i.y,this}divideScalar(i){return this.multiplyScalar(1/i)}applyMatrix3(i){const n=this.x,_=this.y,x=i.elements;return this.x=x[0]*n+x[3]*_+x[6],this.y=x[1]*n+x[4]*_+x[7],this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this}clamp(i,n){return this.x=(0,w.qE)(this.x,i.x,n.x),this.y=(0,w.qE)(this.y,i.y,n.y),this}clampScalar(i,n){return this.x=(0,w.qE)(this.x,i,n),this.y=(0,w.qE)(this.y,i,n),this}clampLength(i,n){const _=this.length();return this.divideScalar(_||1).multiplyScalar((0,w.qE)(_,i,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(i){return this.x*i.x+this.y*i.y}cross(i){return this.x*i.y-this.y*i.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(i){const n=Math.sqrt(this.lengthSq()*i.lengthSq());if(n===0)return Math.PI/2;const _=this.dot(i)/n;return Math.acos((0,w.qE)(_,-1,1))}distanceTo(i){return Math.sqrt(this.distanceToSquared(i))}distanceToSquared(i){const n=this.x-i.x,_=this.y-i.y;return n*n+_*_}manhattanDistanceTo(i){return Math.abs(this.x-i.x)+Math.abs(this.y-i.y)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,n){return this.x+=(i.x-this.x)*n,this.y+=(i.y-this.y)*n,this}lerpVectors(i,n,_){return this.x=i.x+(n.x-i.x)*_,this.y=i.y+(n.y-i.y)*_,this}equals(i){return i.x===this.x&&i.y===this.y}fromArray(i,n=0){return this.x=i[n],this.y=i[n+1],this}toArray(i=[],n=0){return i[n]=this.x,i[n+1]=this.y,i}fromBufferAttribute(i,n){return this.x=i.getX(n),this.y=i.getY(n),this}rotateAround(i,n){const _=Math.cos(n),x=Math.sin(n),h=this.x-i.x,m=this.y-i.y;return this.x=h*_-m*x+i.x,this.y=h*x+m*_+i.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}},902467:(J,F,E)=>{E.d(F,{I:()=>C});var w=E(774153);class C{constructor(i=0,n=0,_=0,x=1){C.prototype.isVector4=!0,this.x=i,this.y=n,this.z=_,this.w=x}get width(){return this.z}set width(i){this.z=i}get height(){return this.w}set height(i){this.w=i}set(i,n,_,x){return this.x=i,this.y=n,this.z=_,this.w=x,this}setScalar(i){return this.x=i,this.y=i,this.z=i,this.w=i,this}setX(i){return this.x=i,this}setY(i){return this.y=i,this}setZ(i){return this.z=i,this}setW(i){return this.w=i,this}setComponent(i,n){switch(i){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+i)}return this}getComponent(i){switch(i){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+i)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(i){return this.x=i.x,this.y=i.y,this.z=i.z,this.w=i.w!==void 0?i.w:1,this}add(i){return this.x+=i.x,this.y+=i.y,this.z+=i.z,this.w+=i.w,this}addScalar(i){return this.x+=i,this.y+=i,this.z+=i,this.w+=i,this}addVectors(i,n){return this.x=i.x+n.x,this.y=i.y+n.y,this.z=i.z+n.z,this.w=i.w+n.w,this}addScaledVector(i,n){return this.x+=i.x*n,this.y+=i.y*n,this.z+=i.z*n,this.w+=i.w*n,this}sub(i){return this.x-=i.x,this.y-=i.y,this.z-=i.z,this.w-=i.w,this}subScalar(i){return this.x-=i,this.y-=i,this.z-=i,this.w-=i,this}subVectors(i,n){return this.x=i.x-n.x,this.y=i.y-n.y,this.z=i.z-n.z,this.w=i.w-n.w,this}multiply(i){return this.x*=i.x,this.y*=i.y,this.z*=i.z,this.w*=i.w,this}multiplyScalar(i){return this.x*=i,this.y*=i,this.z*=i,this.w*=i,this}applyMatrix4(i){const n=this.x,_=this.y,x=this.z,h=this.w,m=i.elements;return this.x=m[0]*n+m[4]*_+m[8]*x+m[12]*h,this.y=m[1]*n+m[5]*_+m[9]*x+m[13]*h,this.z=m[2]*n+m[6]*_+m[10]*x+m[14]*h,this.w=m[3]*n+m[7]*_+m[11]*x+m[15]*h,this}divide(i){return this.x/=i.x,this.y/=i.y,this.z/=i.z,this.w/=i.w,this}divideScalar(i){return this.multiplyScalar(1/i)}setAxisAngleFromQuaternion(i){this.w=2*Math.acos(i.w);const n=Math.sqrt(1-i.w*i.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=i.x/n,this.y=i.y/n,this.z=i.z/n),this}setAxisAngleFromRotationMatrix(i){let n,_,x,h;const s=i.elements,t=s[0],e=s[4],r=s[8],l=s[1],y=s[5],b=s[9],c=s[2],v=s[6],M=s[10];if(Math.abs(e-l)<.01&&Math.abs(r-c)<.01&&Math.abs(b-v)<.01){if(Math.abs(e+l)<.1&&Math.abs(r+c)<.1&&Math.abs(b+v)<.1&&Math.abs(t+y+M-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const f=(t+1)/2,g=(y+1)/2,d=(M+1)/2,u=(e+l)/4,o=(r+c)/4,S=(b+v)/4;return f>g&&f>d?f<.01?(_=0,x=.707106781,h=.707106781):(_=Math.sqrt(f),x=u/_,h=o/_):g>d?g<.01?(_=.707106781,x=0,h=.707106781):(x=Math.sqrt(g),_=u/x,h=S/x):d<.01?(_=.707106781,x=.707106781,h=0):(h=Math.sqrt(d),_=o/h,x=S/h),this.set(_,x,h,n),this}let p=Math.sqrt((v-b)*(v-b)+(r-c)*(r-c)+(l-e)*(l-e));return Math.abs(p)<.001&&(p=1),this.x=(v-b)/p,this.y=(r-c)/p,this.z=(l-e)/p,this.w=Math.acos((t+y+M-1)/2),this}setFromMatrixPosition(i){const n=i.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(i){return this.x=Math.min(this.x,i.x),this.y=Math.min(this.y,i.y),this.z=Math.min(this.z,i.z),this.w=Math.min(this.w,i.w),this}max(i){return this.x=Math.max(this.x,i.x),this.y=Math.max(this.y,i.y),this.z=Math.max(this.z,i.z),this.w=Math.max(this.w,i.w),this}clamp(i,n){return this.x=(0,w.qE)(this.x,i.x,n.x),this.y=(0,w.qE)(this.y,i.y,n.y),this.z=(0,w.qE)(this.z,i.z,n.z),this.w=(0,w.qE)(this.w,i.w,n.w),this}clampScalar(i,n){return this.x=(0,w.qE)(this.x,i,n),this.y=(0,w.qE)(this.y,i,n),this.z=(0,w.qE)(this.z,i,n),this.w=(0,w.qE)(this.w,i,n),this}clampLength(i,n){const _=this.length();return this.divideScalar(_||1).multiplyScalar((0,w.qE)(_,i,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(i){return this.x*i.x+this.y*i.y+this.z*i.z+this.w*i.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(i){return this.normalize().multiplyScalar(i)}lerp(i,n){return this.x+=(i.x-this.x)*n,this.y+=(i.y-this.y)*n,this.z+=(i.z-this.z)*n,this.w+=(i.w-this.w)*n,this}lerpVectors(i,n,_){return this.x=i.x+(n.x-i.x)*_,this.y=i.y+(n.y-i.y)*_,this.z=i.z+(n.z-i.z)*_,this.w=i.w+(n.w-i.w)*_,this}equals(i){return i.x===this.x&&i.y===this.y&&i.z===this.z&&i.w===this.w}fromArray(i,n=0){return this.x=i[n],this.y=i[n+1],this.z=i[n+2],this.w=i[n+3],this}toArray(i=[],n=0){return i[n]=this.x,i[n+1]=this.y,i[n+2]=this.z,i[n+3]=this.w,i}fromBufferAttribute(i,n){return this.x=i.getX(n),this.y=i.getY(n),this.z=i.getZ(n),this.w=i.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}},136767:(J,F,E)=>{E.r(F),E.d(F,{Group:()=>C});var w=E(493303);class C extends w.B{constructor(){super(),this.isGroup=!0,this.type="Group"}}},955609:(J,F,E)=>{E.d(F,{e:()=>Q});var w=E(824954),C=E(237481),A=E(721993),i=E(694454),n=E(541761),_=E(493303),x=E(902467);const h=new w.Vector3,m=new w.Vector3,a=new w.Vector3,s=new w.Vector3,t=new w.Vector3,e=new w.Vector3,r=new w.Vector3,l=new w.Vector3,y=new w.Vector3,b=new w.Vector3,c=new x.I,v=new x.I,M=new x.I;class p{constructor(D=new w.Vector3,P=new w.Vector3,k=new w.Vector3){this.a=D,this.b=P,this.c=k}static getNormal(D,P,k,V){V.subVectors(k,P),h.subVectors(D,P),V.cross(h);const I=V.lengthSq();return I>0?V.multiplyScalar(1/Math.sqrt(I)):V.set(0,0,0)}static getBarycoord(D,P,k,V,I){h.subVectors(V,P),m.subVectors(k,P),a.subVectors(D,P);const j=h.dot(h),N=h.dot(m),W=h.dot(a),X=m.dot(m),G=m.dot(a),q=j*X-N*N;if(q===0)return I.set(0,0,0),null;const st=1/q,tt=(X*W-N*G)*st,$=(j*G-N*W)*st;return I.set(1-tt-$,$,tt)}static containsPoint(D,P,k,V){return this.getBarycoord(D,P,k,V,s)===null?!1:s.x>=0&&s.y>=0&&s.x+s.y<=1}static getInterpolation(D,P,k,V,I,j,N,W){return this.getBarycoord(D,P,k,V,s)===null?(W.x=0,W.y=0,"z"in W&&(W.z=0),"w"in W&&(W.w=0),null):(W.setScalar(0),W.addScaledVector(I,s.x),W.addScaledVector(j,s.y),W.addScaledVector(N,s.z),W)}static getInterpolatedAttribute(D,P,k,V,I,j){return c.setScalar(0),v.setScalar(0),M.setScalar(0),c.fromBufferAttribute(D,P),v.fromBufferAttribute(D,k),M.fromBufferAttribute(D,V),j.setScalar(0),j.addScaledVector(c,I.x),j.addScaledVector(v,I.y),j.addScaledVector(M,I.z),j}static isFrontFacing(D,P,k,V){return h.subVectors(k,P),m.subVectors(D,P),h.cross(m).dot(V)<0}set(D,P,k){return this.a.copy(D),this.b.copy(P),this.c.copy(k),this}setFromPointsAndIndices(D,P,k,V){return this.a.copy(D[P]),this.b.copy(D[k]),this.c.copy(D[V]),this}setFromAttributeAndIndices(D,P,k,V){return this.a.fromBufferAttribute(D,P),this.b.fromBufferAttribute(D,k),this.c.fromBufferAttribute(D,V),this}clone(){return new this.constructor().copy(this)}copy(D){return this.a.copy(D.a),this.b.copy(D.b),this.c.copy(D.c),this}getArea(){return h.subVectors(this.c,this.b),m.subVectors(this.a,this.b),h.cross(m).length()*.5}getMidpoint(D){return D.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(D){return p.getNormal(this.a,this.b,this.c,D)}getPlane(D){return D.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(D,P){return p.getBarycoord(D,this.a,this.b,this.c,P)}getInterpolation(D,P,k,V,I){return p.getInterpolation(D,this.a,this.b,this.c,P,k,V,I)}containsPoint(D){return p.containsPoint(D,this.a,this.b,this.c)}isFrontFacing(D){return p.isFrontFacing(this.a,this.b,this.c,D)}intersectsBox(D){return D.intersectsTriangle(this)}closestPointToPoint(D,P){const k=this.a,V=this.b,I=this.c;let j,N;t.subVectors(V,k),e.subVectors(I,k),l.subVectors(D,k);const W=t.dot(l),X=e.dot(l);if(W<=0&&X<=0)return P.copy(k);y.subVectors(D,V);const G=t.dot(y),q=e.dot(y);if(G>=0&&q<=G)return P.copy(V);const st=W*q-G*X;if(st<=0&&W>=0&&G<=0)return j=W/(W-G),P.copy(k).addScaledVector(t,j);b.subVectors(D,I);const tt=t.dot(b),$=e.dot(b);if($>=0&&tt<=$)return P.copy(I);const rt=tt*X-W*$;if(rt<=0&&X>=0&&$<=0)return N=X/(X-$),P.copy(k).addScaledVector(e,N);const K=G*$-tt*q;if(K<=0&&q-G>=0&&tt-$>=0)return r.subVectors(I,V),N=(q-G)/(q-G+(tt-$)),P.copy(V).addScaledVector(r,N);const nt=1/(K+rt+st);return j=rt*nt,N=st*nt,P.copy(k).addScaledVector(t,j).addScaledVector(e,N)}equals(D){return D.a.equals(this.a)&&D.b.equals(this.b)&&D.c.equals(this.c)}}var f=E(272790),g=E(51950),d=E(5257);const u=new n.k,o=new i.R,S=new A.i,T=new w.Vector3,B=new w.Vector3,z=new w.Vector3,R=new w.Vector3,O=new w.Vector3,U=new w.Vector3,L=new w.Vector3,H=new w.Vector3;class Q extends _.B{constructor(D=new d.L,P=new g.V){super(),this.isMesh=!0,this.type="Mesh",this.geometry=D,this.material=P,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(D,P){return super.copy(D,P),D.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=D.morphTargetInfluences.slice()),D.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},D.morphTargetDictionary)),this.material=Array.isArray(D.material)?D.material.slice():D.material,this.geometry=D.geometry,this}updateMorphTargets(){const P=this.geometry.morphAttributes,k=Object.keys(P);if(k.length>0){const V=P[k[0]];if(V!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let I=0,j=V.length;I<j;I++){const N=V[I].name||String(I);this.morphTargetInfluences.push(0),this.morphTargetDictionary[N]=I}}}}getVertexPosition(D,P){const k=this.geometry,V=k.attributes.position,I=k.morphAttributes.position,j=k.morphTargetsRelative;P.fromBufferAttribute(V,D);const N=this.morphTargetInfluences;if(I&&N){U.set(0,0,0);for(let W=0,X=I.length;W<X;W++){const G=N[W],q=I[W];G!==0&&(O.fromBufferAttribute(q,D),j?U.addScaledVector(O,G):U.addScaledVector(O.sub(P),G))}P.add(U)}return P}raycast(D,P){const k=this.geometry,V=this.material,I=this.matrixWorld;V!==void 0&&(k.boundingSphere===null&&k.computeBoundingSphere(),S.copy(k.boundingSphere),S.applyMatrix4(I),o.copy(D.ray).recast(D.near),!(S.containsPoint(o.origin)===!1&&(o.intersectSphere(S,T)===null||o.origin.distanceToSquared(T)>(D.far-D.near)**2))&&(u.copy(I).invert(),o.copy(D.ray).applyMatrix4(u),!(k.boundingBox!==null&&o.intersectsBox(k.boundingBox)===!1)&&this._computeIntersections(D,P,o)))}_computeIntersections(D,P,k){let V;const I=this.geometry,j=this.material,N=I.index,W=I.attributes.position,X=I.attributes.uv,G=I.attributes.uv1,q=I.attributes.normal,st=I.groups,tt=I.drawRange;if(N!==null)if(Array.isArray(j))for(let $=0,rt=st.length;$<rt;$++){const K=st[$],nt=j[K.materialIndex],at=Math.max(K.start,tt.start),ot=Math.min(N.count,Math.min(K.start+K.count,tt.start+tt.count));for(let et=at,ct=ot;et<ct;et+=3){const ut=N.getX(et),ht=N.getX(et+1),lt=N.getX(et+2);V=Y(this,nt,D,k,X,G,q,ut,ht,lt),V&&(V.faceIndex=Math.floor(et/3),V.face.materialIndex=K.materialIndex,P.push(V))}}else{const $=Math.max(0,tt.start),rt=Math.min(N.count,tt.start+tt.count);for(let K=$,nt=rt;K<nt;K+=3){const at=N.getX(K),ot=N.getX(K+1),et=N.getX(K+2);V=Y(this,j,D,k,X,G,q,at,ot,et),V&&(V.faceIndex=Math.floor(K/3),P.push(V))}}else if(W!==void 0)if(Array.isArray(j))for(let $=0,rt=st.length;$<rt;$++){const K=st[$],nt=j[K.materialIndex],at=Math.max(K.start,tt.start),ot=Math.min(W.count,Math.min(K.start+K.count,tt.start+tt.count));for(let et=at,ct=ot;et<ct;et+=3){const ut=et,ht=et+1,lt=et+2;V=Y(this,nt,D,k,X,G,q,ut,ht,lt),V&&(V.faceIndex=Math.floor(et/3),V.face.materialIndex=K.materialIndex,P.push(V))}}else{const $=Math.max(0,tt.start),rt=Math.min(W.count,tt.start+tt.count);for(let K=$,nt=rt;K<nt;K+=3){const at=K,ot=K+1,et=K+2;V=Y(this,j,D,k,X,G,q,at,ot,et),V&&(V.faceIndex=Math.floor(K/3),P.push(V))}}}}function it(Z,D,P,k,V,I,j,N){let W;if(D.side===f.hsX?W=k.intersectTriangle(j,I,V,!0,N):W=k.intersectTriangle(V,I,j,D.side===f.hB5,N),W===null)return null;H.copy(N),H.applyMatrix4(Z.matrixWorld);const X=P.ray.origin.distanceTo(H);return X<P.near||X>P.far?null:{distance:X,point:H.clone(),object:Z}}function Y(Z,D,P,k,V,I,j,N,W,X){Z.getVertexPosition(N,B),Z.getVertexPosition(W,z),Z.getVertexPosition(X,R);const G=it(Z,D,P,k,B,z,R,L);if(G){const q=new w.Vector3;p.getBarycoord(L,B,z,R,q),V&&(G.uv=p.getInterpolatedAttribute(V,N,W,X,q,new C.I)),I&&(G.uv1=p.getInterpolatedAttribute(I,N,W,X,q,new C.I)),j&&(G.normal=p.getInterpolatedAttribute(j,N,W,X,q,new w.Vector3),G.normal.dot(k.direction)>0&&G.normal.multiplyScalar(-1));const st={a:N,b:W,c:X,normal:new w.Vector3,materialIndex:0};p.getNormal(B,z,R,st.normal),G.face=st,G.barycoord=q}return G}},641897:(J,F,E)=>{E.d(F,{n:()=>x});var w=E(251750),C=E(953923),A=E(272790),i=E(902467),n=E(590336);class _ extends w.Q{constructor(m=1,a=1,s={}){super(),s=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:A.k6q,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},s),this.isRenderTarget=!0,this.width=m,this.height=a,this.depth=s.depth,this.scissor=new i.I(0,0,m,a),this.scissorTest=!1,this.viewport=new i.I(0,0,m,a);const t={width:m,height:a,depth:s.depth},e=new C.g(t);this.textures=[];const r=s.count;for(let l=0;l<r;l++)this.textures[l]=e.clone(),this.textures[l].isRenderTargetTexture=!0,this.textures[l].renderTarget=this;this._setTextureOptions(s),this.depthBuffer=s.depthBuffer,this.stencilBuffer=s.stencilBuffer,this.resolveDepthBuffer=s.resolveDepthBuffer,this.resolveStencilBuffer=s.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=s.depthTexture,this.samples=s.samples,this.multiview=s.multiview}_setTextureOptions(m={}){const a={minFilter:A.k6q,generateMipmaps:!1,flipY:!1,internalFormat:null};m.mapping!==void 0&&(a.mapping=m.mapping),m.wrapS!==void 0&&(a.wrapS=m.wrapS),m.wrapT!==void 0&&(a.wrapT=m.wrapT),m.wrapR!==void 0&&(a.wrapR=m.wrapR),m.magFilter!==void 0&&(a.magFilter=m.magFilter),m.minFilter!==void 0&&(a.minFilter=m.minFilter),m.format!==void 0&&(a.format=m.format),m.type!==void 0&&(a.type=m.type),m.anisotropy!==void 0&&(a.anisotropy=m.anisotropy),m.colorSpace!==void 0&&(a.colorSpace=m.colorSpace),m.flipY!==void 0&&(a.flipY=m.flipY),m.generateMipmaps!==void 0&&(a.generateMipmaps=m.generateMipmaps),m.internalFormat!==void 0&&(a.internalFormat=m.internalFormat);for(let s=0;s<this.textures.length;s++)this.textures[s].setValues(a)}get texture(){return this.textures[0]}set texture(m){this.textures[0]=m}set depthTexture(m){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),m!==null&&(m.renderTarget=this),this._depthTexture=m}get depthTexture(){return this._depthTexture}setSize(m,a,s=1){if(this.width!==m||this.height!==a||this.depth!==s){this.width=m,this.height=a,this.depth=s;for(let t=0,e=this.textures.length;t<e;t++)this.textures[t].image.width=m,this.textures[t].image.height=a,this.textures[t].image.depth=s,this.textures[t].isArrayTexture=this.textures[t].image.depth>1;this.dispose()}this.viewport.set(0,0,m,a),this.scissor.set(0,0,m,a)}clone(){return new this.constructor().copy(this)}copy(m){this.width=m.width,this.height=m.height,this.depth=m.depth,this.scissor.copy(m.scissor),this.scissorTest=m.scissorTest,this.viewport.copy(m.viewport),this.textures.length=0;for(let a=0,s=m.textures.length;a<s;a++){this.textures[a]=m.textures[a].clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;const t=Object.assign({},m.textures[a].image);this.textures[a].source=new n.k(t)}return this.depthBuffer=m.depthBuffer,this.stencilBuffer=m.stencilBuffer,this.resolveDepthBuffer=m.resolveDepthBuffer,this.resolveStencilBuffer=m.resolveStencilBuffer,m.depthTexture!==null&&(this.depthTexture=m.depthTexture.clone()),this.samples=m.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class x extends _{constructor(m=1,a=1,s={}){super(m,a,s),this.isWebGLRenderTarget=!0}}},671619:(J,F,E)=>{E.d(F,{Ii:()=>A,Jd:()=>i,Ll:()=>_,_U:()=>n,lx:()=>C});var w=E(116898);function C(x){const h={};for(const m in x){h[m]={};for(const a in x[m]){const s=x[m][a];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),h[m][a]=null):h[m][a]=s.clone():Array.isArray(s)?h[m][a]=s.slice():h[m][a]=s}}return h}function A(x){const h={};for(let m=0;m<x.length;m++){const a=C(x[m]);for(const s in a)h[s]=a[s]}return h}function i(x){const h=[];for(let m=0;m<x.length;m++)h.push(x[m].clone());return h}function n(x){const h=x.getRenderTarget();return h===null?x.outputColorSpace:h.isXRRenderTarget===!0?h.texture.colorSpace:w.pp.workingColorSpace}const _={clone:C,merge:A}},590336:(J,F,E)=>{E.d(F,{k:()=>x});var w=E(472686),C=E(116898);let A;class i{static getDataURL(a,s="image/png"){if(/^data:/i.test(a.src)||typeof HTMLCanvasElement>"u")return a.src;let t;if(a instanceof HTMLCanvasElement)t=a;else{A===void 0&&(A=(0,w.qq)("canvas")),A.width=a.width,A.height=a.height;const e=A.getContext("2d");a instanceof ImageData?e.putImageData(a,0,0):e.drawImage(a,0,0,a.width,a.height),t=A}return t.toDataURL(s)}static sRGBToLinear(a){if(typeof HTMLImageElement<"u"&&a instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&a instanceof ImageBitmap){const s=(0,w.qq)("canvas");s.width=a.width,s.height=a.height;const t=s.getContext("2d");t.drawImage(a,0,0,a.width,a.height);const e=t.getImageData(0,0,a.width,a.height),r=e.data;for(let l=0;l<r.length;l++)r[l]=(0,C.dk)(r[l]/255)*255;return t.putImageData(e,0,0),s}else if(a.data){const s=a.data.slice(0);for(let t=0;t<s.length;t++)s instanceof Uint8Array||s instanceof Uint8ClampedArray?s[t]=Math.floor((0,C.dk)(s[t]/255)*255):s[t]=(0,C.dk)(s[t]);return{data:s,width:a.width,height:a.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),a}}var n=E(774153);let _=0;class x{constructor(a=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_++}),this.uuid=(0,n.lk)(),this.data=a,this.dataReady=!0,this.version=0}getSize(a){const s=this.data;return s instanceof HTMLVideoElement?a.set(s.videoWidth,s.videoHeight,0):s instanceof VideoFrame?a.set(s.displayHeight,s.displayWidth,0):s!==null?a.set(s.width,s.height,s.depth||0):a.set(0,0,0),a}set needsUpdate(a){a===!0&&this.version++}toJSON(a){const s=a===void 0||typeof a=="string";if(!s&&a.images[this.uuid]!==void 0)return a.images[this.uuid];const t={uuid:this.uuid,url:""},e=this.data;if(e!==null){let r;if(Array.isArray(e)){r=[];for(let l=0,y=e.length;l<y;l++)e[l].isDataTexture?r.push(h(e[l].image)):r.push(h(e[l]))}else r=h(e);t.url=r}return s||(a.images[this.uuid]=t),t}}function h(m){return typeof HTMLImageElement<"u"&&m instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&m instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&m instanceof ImageBitmap?i.getDataURL(m):m.data?{data:Array.from(m.data),width:m.width,height:m.height,type:m.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}},953923:(J,F,E)=>{E.d(F,{g:()=>a});var w=E(251750),C=E(272790),A=E(774153),i=E(237481),n=E(824954),_=E(914164),x=E(590336);let h=0;const m=new n.Vector3;class a extends w.Q{constructor(t=a.DEFAULT_IMAGE,e=a.DEFAULT_MAPPING,r=C.ghU,l=C.ghU,y=C.k6q,b=C.$_I,c=C.GWd,v=C.OUM,M=a.DEFAULT_ANISOTROPY,p=C.jf0){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:h++}),this.uuid=(0,A.lk)(),this.name="",this.source=new x.k(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=r,this.wrapT=l,this.magFilter=y,this.minFilter=b,this.anisotropy=M,this.format=c,this.internalFormat=null,this.type=v,this.offset=new i.I(0,0),this.repeat=new i.I(1,1),this.center=new i.I(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new _.d,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=p,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(t&&t.depth&&t.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(m).x}get height(){return this.source.getSize(m).y}get depth(){return this.source.getSize(m).z}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.isArrayTexture=t.isArrayTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}setValues(t){for(const e in t){const r=t[e];if(r===void 0){console.warn(`THREE.Texture.setValues(): parameter '${e}' has value of undefined.`);continue}const l=this[e];if(l===void 0){console.warn(`THREE.Texture.setValues(): property '${e}' does not exist.`);continue}l&&r&&l.isVector2&&r.isVector2||l&&r&&l.isVector3&&r.isVector3||l&&r&&l.isMatrix3&&r.isMatrix3?l.copy(r):this[e]=r}}toJSON(t){const e=t===void 0||typeof t=="string";if(!e&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),e||(t.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==C.UTZ)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case C.GJx:t.x=t.x-Math.floor(t.x);break;case C.ghU:t.x=t.x<0?0:1;break;case C.kTW:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case C.GJx:t.y=t.y-Math.floor(t.y);break;case C.ghU:t.y=t.y<0?0:1;break;case C.kTW:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){t===!0&&this.pmremVersion++}}a.DEFAULT_IMAGE=null,a.DEFAULT_MAPPING=C.UTZ,a.DEFAULT_ANISOTROPY=1},472686:(J,F,E)=>{E.d(F,{AQ:()=>A,je:()=>a,lP:()=>x,mc:()=>m,qq:()=>_});function w(e){if(e.length===0)return 1/0;let r=e[0];for(let l=1,y=e.length;l<y;++l)e[l]<r&&(r=e[l]);return r}function C(e){if(e.length===0)return-1/0;let r=e[0];for(let l=1,y=e.length;l<y;++l)e[l]>r&&(r=e[l]);return r}function A(e){for(let r=e.length-1;r>=0;--r)if(e[r]>=65535)return!0;return!1}const i={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function n(e,r){return new i[e](r)}function _(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function x(){const e=_("canvas");return e.style.display="block",e}const h={};function m(e){e in h||(h[e]=!0,console.warn(e))}function a(e,r,l){return new Promise(function(y,b){function c(){switch(e.clientWaitSync(r,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:b();break;case e.TIMEOUT_EXPIRED:setTimeout(c,l);break;default:y()}}setTimeout(c,l)})}function s(e){const r=e.elements;r[2]=.5*r[2]+.5*r[3],r[6]=.5*r[6]+.5*r[7],r[10]=.5*r[10]+.5*r[11],r[14]=.5*r[14]+.5*r[15]}function t(e){const r=e.elements;r[11]===-1?(r[10]=-r[10]-1,r[14]=-r[14]):(r[10]=-r[10],r[14]=-r[14]+1)}}}]);

//# sourceMappingURL=shadowProcessor.3ac43e3c08c74a62759f.chunk.js.map